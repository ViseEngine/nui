{"version":3,"sources":["base-debug.js"],"names":["Nui","define","this","extend","_title","_getCode","self","code","_class","constructor","str","match","array","_getarr","each","v","trim","test","replace","_getcode","$","RegExp","_comment","js","css","res","split","v1","length","v2","k2","istag","preBlank","tagname","toLowerCase","exports","call","xml","imports","hash","location","main","items","find","menus","init","setYear","event","position","bsie7","text","Date","getFullYear","elem","scrollTop","top","scroll","stop","i","item","id","itop","ntop","next","eq","outerHeight","removeClass","addClass","removeAttr","attr","box","height","timer","resize","win","clearTimeout","setTimeout"],"mappings":"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","file":"base-min.js.map?v=89759ad","sourcesContent":["\n/**\r\n * @author Aniu[2017-03-02 08:44]\r\n * @update Aniu[2017-03-02 08:44]\r\n * @version 1.0.1\r\n * @description css语法高亮组件\r\n */\r\n\r\nNui.define('src/components/highlight/style',function(){\r\n    return this.extend('src/components/highlight/highlight', {\r\n        _title:'css',\r\n        _getCode:function(){\r\n            var self = this;\r\n            var code = self.code;\r\n            var _class = self.constructor;\r\n            var str = '';\r\n            var match = code.match(/(\\/\\*(.|\\s)*?\\*\\/)|(\\{[^\\{\\}\\/]*\\})/g);\r\n            var array = _class._getarr(match, code);\r\n            Nui.each(array, function(v){\r\n                if(Nui.trim(v)){\r\n                    //多行注释\r\n                    if(/^\\s*\\/\\*/.test(v)){\r\n                        v = v.replace(/(.+)/g, _class._getcode('comment', '$1'))\r\n                    }\r\n                    else{\r\n                        //匹配属性\r\n                        if(/\\}\\s*$/.test(v)){\r\n                            v = v.replace(/(\\s*)([^:;\\{\\}\\/\\*]+)(:)([^:;\\{\\}\\/\\*]+)/g, '$1'+_class._getcode('attr', '$2')+'$3'+_class._getcode('string', '$4'))\r\n                                .replace(/([\\:\\;\\{\\}])/g, _class._getcode('symbol', '$1'));\r\n                        }\r\n                        //选择器\r\n                        else{\r\n                            v = v.replace(/([^\\:\\{\\}\\@\\#\\s\\.]+)/g, _class._getcode('selector', '$1'))\r\n                                .replace(/([\\:\\{\\}\\@\\#\\.])/g, _class._getcode('symbol', '$1'));\r\n                        }\r\n                    }\r\n                }\r\n                str += v;\r\n            })\r\n            return str\r\n        }\r\n    })\r\n})\r\n\n/**\r\n * @author Aniu[2017-03-02 08:44]\r\n * @update Aniu[2017-03-02 08:44]\r\n * @version 1.0.1\r\n * @description javascript语法高亮组件\r\n */\r\n\r\nNui.define('src/components/highlight/javascript',function(){\r\n    return this.extend('src/components/highlight/highlight', {\r\n        _title:'js',\r\n        _getCode:function(){\r\n            var self = this;\r\n            var code = self.code;\r\n            var _class = self.constructor;\r\n            var str = '';\r\n            var kws = 'abstract|arguments|boolean|break|byte|case|catch|char|class|const|continue|debugger|default|delete|do|double|else|elseif|each|enum|eval|export|'+\r\n                      'extends|false|final|finally|float|for|function|goto|if|implements|import|in|instanceof|int|include|interface|let|long|native|new|null|'+\r\n                      'package|private|protected|public|return|short|static|super|switch|synchronized|this|throw|throws|transient|true|try|typeof|var';\r\n            var symbol = '&lt;|&gt;|;|!|%|\\\\\\|\\\\\\[|\\\\\\]|\\\\\\(|\\\\\\)|\\\\\\{|\\\\\\}|\\\\\\=|\\\\\\/|-|\\\\\\+|,|\\\\\\.|\\\\\\:|\\\\\\?|~|\\\\\\*|&';\r\n            var match = code.match(/(\\/\\/.*)|(\\/\\*(.|\\s)*?\\*\\/)|('[^']*')|(\"[^\"]*\")/g);\r\n            var array = _class._getarr(match, code);\r\n            Nui.each(array, function(v){\r\n                if($.trim(v)){\r\n                    //单行注释\r\n                    if(/^\\s*\\/\\//.test(v)){\r\n                        v = _class._getcode('comment', v);\r\n                    }\r\n                    //多行注释\r\n                    else if(/^\\s*\\/\\*/.test(v)){\r\n                        v = v.replace(/(.+)/g, _class._getcode('comment', '$1'))\r\n                    }\r\n                    else{\r\n                        //字符串\r\n                        if(/'|\"/.test(v)){\r\n                            v = v.replace(/(.+)/g, _class._getcode('string', '$1'))\r\n                        }\r\n                        //关键字、符号、单词\r\n                        else{\r\n                            v = v.replace(new RegExp('('+ symbol +')', 'g'), _class._getcode('symbol', '$1'))\r\n                                .replace(new RegExp('('+ kws +')(\\\\s+|\\\\\\<code)', 'g'), _class._getcode('keyword', '$1')+'$2')\r\n                                .replace(/(\\/code>\\s*)(\\d+)/g, '$1'+_class._getcode('number', '$2'))\r\n                                .replace(/(\\/code>\\s*)?([^<>\\s]+)(\\s*<code)/g, '$1'+_class._getcode('word', '$2')+'$3')\r\n\r\n                        }\r\n                        v = _class._comment(v);\r\n                    }\r\n                }\r\n                str += v;\r\n            })\r\n            return str\r\n        }\r\n    })\r\n})\r\n\n/**\r\n * @author Aniu[2017-03-02 08:44]\r\n * @update Aniu[2017-03-02 08:44]\r\n * @version 1.0.1\r\n * @description xml语法高亮组件\r\n */\r\n\r\nNui.define('src/components/highlight/xml',['src/components/highlight/javascript', 'src/components/highlight/style'],function(js, css){\r\n    return this.extend('src/components/highlight/highlight', {\r\n        _title:'xml',\r\n        _getCode:function(){\r\n            var self = this;\r\n            var code = self.code;\r\n            var _class = self.constructor;\r\n            var str = '';\r\n            code = code.replace(/&lt;\\s*![^!]+-\\s*&gt;/g, function(res){\r\n                return res.replace(/&lt;/g, '<<').replace(/&gt;/g, '>>')\r\n            });\r\n            Nui.each(code.split('&lt;'), function(v1){\r\n                v1 = v1.split('&gt;');\r\n                var length = v1.length;\r\n                Nui.each(v1, function(v2, k2){\r\n                    if(Nui.trim(v2)){\r\n                        if(k2 == 0){\r\n                            var istag = false;\r\n                            if(/^\\s*\\//.test(v2)){\r\n                                v2 = v2.replace(/([^\\r\\n\\/]+)/g, _class._getcode('tag', '$1'))\r\n                                       .replace(/^(\\s*\\/+)/, _class._getcode('symbol', '$1'))\r\n                            }\r\n                            else{\r\n                                var preBlank = v2.match(/^\\s+/)||'';\r\n                                if(/\\=\\s*['\"]$/.test(v2)){\r\n                                    istag = true\r\n                                }\r\n                                v2 = v2.replace(/^\\s+/, '')\r\n                                       .replace(/(\\s+)([^'\"\\/\\s\\=]+)((\\s*=\\s*)(['\"]?[^'\"]*['\"]?))?/g, '$1'+_class._getcode('attr', '$2')+_class._getcode('symbol', '$4')+_class._getcode('string', '$5'))\r\n                                       .replace(/<code class=\"\\w+\">(\\s*((<<\\s*![-\\s]+)|([-\\s]+>>))?)<\\/code>/g, '$1')\r\n                                       .replace(/^([^\\s]+)/, _class._getcode('tag', '$1'))\r\n                                       .replace(/(\\/+\\s*)$/, _class._getcode('symbol', '$1'))\r\n                                v2 = preBlank + v2;\r\n                            }\r\n                            v2 = _class._getcode('symbol', '&lt;') + v2;\r\n                            if(!istag){\r\n                                v2 += _class._getcode('symbol', '&gt;');\r\n                            }\r\n                        }\r\n                        else{\r\n                            //闭合标签\r\n                            if(length === 3 && k2 === 1 && /\\s*['\"]\\s*/.test(v2)){\r\n                                v2 = v2.replace(/(\\s*['\"]\\s*)/, _class._getcode('symbol', '$1')) + _class._getcode('symbol', '&gt;');\r\n                            }\r\n                            //内容\r\n                            else{\r\n                                var tagname = $.trim(v1[0]).toLowerCase();\r\n                                if(tagname == 'style'){\r\n                                    v2 = css.exports._getCode.call(self, v2)\r\n                                }\r\n                                else if(tagname == 'script'){\r\n                                    v2 = js.exports._getCode.call(self, v2)\r\n                                }\r\n                                else{\r\n                                    v2 = v2.replace(/(.+)/g, _class._getcode('text', '$1'))\r\n                                }\r\n                            }\r\n                        }\r\n                        //注释\r\n                        v2 = v2.replace(/<<\\s*![^!]+-\\s*>>/g, function(res){\r\n                            return res.replace(/([^\\r\\n]+)/g, _class._getcode('comment', '$1')).replace(/<</g, '&lt;').replace(/>>/g, '&gt;')\r\n                        })\r\n                    }\r\n                    str += v2\r\n                })\r\n            })\r\n\r\n            return str\r\n        }\r\n    })\r\n})\r\n\nNui.define('{script}/base',['src/components/highlight/xml'], function(xml){\r\n    this.imports('../style/base');\r\n    var hash = location.hash.replace('#', '');\r\n    var main = $('.g-main');\r\n    var items = main.find('h2');\r\n    var length = items.length;\r\n    var menus = $('.m-menu ul');\r\n\r\n    return ({\r\n        init:function(){\r\n            this.setYear();\r\n            if(main.find('h2[id]').length){\r\n                this.event();\r\n                this.position();\r\n            }\r\n            if(Nui.bsie7){\r\n                this.bsie7();\r\n            }\r\n        },\r\n        setYear:function(){\r\n            $('#nowyear').text('-'+new Date().getFullYear());\r\n        },\r\n        position:function(){\r\n            if(hash){\r\n                var elem = $('[id=\"'+ hash +'\"]');\r\n                elem.length && main.scrollTop(elem.position().top)\r\n            }\r\n        },\r\n        event:function(){\r\n            main.scroll(function(){\r\n                var stop = main.scrollTop();\r\n                items.each(function(i){\r\n                    var item = $(this);\r\n                    var id = this.id;\r\n                    var itop = item.position().top - 20;\r\n                    var ntop = 0;\r\n                    var next = items.eq(i+1);\r\n                    if(next.length){\r\n                        ntop = next.position().top - 20\r\n                    }\r\n                    else{\r\n                        ntop = $('.mainbox').outerHeight()\r\n                    }\r\n                    menus.find('a.s-crt').removeClass('s-crt');\r\n                    if(stop >= itop && stop < ntop){\r\n                        menus.find('a[href=\"#'+ id +'\"]').addClass('s-crt');\r\n                        //为了阻止设置location.hash时，浏览器会自行定位到该id的起始位置\r\n                        item.removeAttr('id');\r\n                        location.hash = id;\r\n                        item.attr('id', id);\r\n                        return false;\r\n                    }\r\n                })\r\n            })\r\n        },\r\n        bsie7:function(){\r\n            var box = $('.g-html .g-content');\r\n            var height = $('.g-header').outerHeight();\r\n            var timer = null;\r\n            var resize = function(){\r\n                box.height(Nui.win.height() - height)\r\n            }\r\n            Nui.win.resize(function(){\r\n                clearTimeout(timer);\r\n                timer = setTimeout(resize, 100)\r\n            })\r\n            resize();\r\n        }\r\n    })\r\n})\r\n\n"]}