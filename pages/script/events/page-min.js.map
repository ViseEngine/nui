{"version":3,"sources":["page-debug.js"],"names":["Nui","define","component","util","statics","_maskzIndex","_zIndex","_init","_class","this","timer","win","on","clearTimeout","setTimeout","each","__instances","val","opts","_options","position","isCenter","resize","_$fn","_$ready","init","options","content","width","height","maxWidth","maxHeight","edge","container","title","isMove","isMask","isInnerMove","isClickMask","isMoveMask","isHide","isFull","isTop","isTips","isFixed","scrollbar","align","bubble","enable","dir","iframe","cache","src","close","text","confirm","name","callback","cancel","under","button","onMove","onResize","onScroll","onBeforeDestroy","onTimer","extend","static","_template","layout","mask","movemask","style","data","constructor","_exec","self","_container","_jquery","length","_containerDOM","get","tagName","_window","_isWindow","pos","css","_isFixed","bsie6","_create","buttons","_createButton","isTitle","_tplData","_getContent","z-index","display","_setTop","element","_bindComponentName","$","_tpl2html","appendTo","_box","children","head","_body","main","foot","_iframe","_iframeOnload","_bindMove","_bindTop","_button","_buttonEvent","_bindScroll","_event","_show","_createIframe","jQuery","prop","__id","setParam","Date","getTime","attr","frameborder","id","scroll","load","_iframeDocument","contents","_resize","defaults","caches","btn","push","unshift","slice","_on","e","hasClass","isCall","call","destroy","_setzIndex","x","y","_x","_y","elem","ele","_moveMask","skin","cursor","outerWidth","_getSize","outerHeight","top","left","pageX","pageY","stopPropagation","doc","remove","offsetTop","scrollTop","offsetLeft","scrollLeft","_isTop","_setLower","unders","concat","obj","k","_position","_v","_pos","right","bottom","undefined","v","test","Function","parseFloat","type","wWidth","wHeight","stop","sleft","_setSize","overflow","edgeSize","ws","layer","find","_height","contentHeight","_showMask","__layermask__","hide","_time","_timer","onInit","_timerid","_reset","noMask","exports","_delete","_isdestroy","onDestroy","module","alert","tips","isClose","loading","message","color","form","valid","btns","i","submit","formLayer","elems","rules","messages","setting","rule","eval","key","msg","messageFilter","errorClass","onkeyup","focusInvalid","onfocusout","focusCleanup","ignore","success","error","addClass","errorPlacement","removeClass","closest","itemWrap","errorWrap","html","submitHandler","param","getData","result","onBeforeSubmit","ajax","url","dataType","res","xhr","onSuccess","onError","validator","validate","template","events","renders","click .j-add","click .j-del","click .j-update","checks","arr","render","add","del","that","update","trim"],"mappings":"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","file":"page-min.js.map?v=cf965c0","sourcesContent":["/**\r\n * @author Aniu[2016-11-10 22:39]\r\n * @update Aniu[2016-11-10 22:39]\r\n * @version 1.0.1\r\n * @description layer弹出层\r\n */\r\n\r\nNui.define('src/components/layer/layer',['component', 'util'], function(component, util){\r\n    var module = this;\r\n\r\n    var statics = {\r\n        _maskzIndex:10000,\r\n        _zIndex:10000,\r\n        _init:function(){\r\n            var _class = this;\r\n            var timer = null;\r\n            Nui.win.on('resize', function(){\r\n                clearTimeout(timer);\r\n                timer = setTimeout(function(){\r\n                    Nui.each(_class.__instances, function(val){\r\n                        var opts = val._options;\r\n                        if(opts.position || opts.isCenter === true){\r\n                            val.resize()\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n        },\r\n        _$fn:null,\r\n        _$ready:null,\r\n        init:null\r\n    }\r\n\r\n    var options = {\r\n        //主体内容\r\n        content:'',\r\n        //高度\r\n        width:320,\r\n        //宽度\r\n        height:'auto',\r\n        //最大宽度\r\n        maxWidth:0,\r\n        //最大高度\r\n        maxHeight:0,\r\n        //定时器，N毫秒后自动关闭\r\n        timer:0,\r\n        //弹窗四周距离窗口边缘距离\r\n        edge:0,\r\n        //弹窗容器\r\n        container:'body',\r\n        //弹窗标题\r\n        title:'温馨提示',\r\n        //是否可以拖动\r\n        isMove:false,\r\n        //是否有遮罩\r\n        isMask:true,\r\n        //是否只能在窗口内拖动\r\n        isInnerMove:false,\r\n        //点击遮罩是否关闭弹窗\r\n        isClickMask:false,\r\n        //是否使用遮罩拖动\r\n        isMoveMask:false,\r\n        //是否能用hide方法关闭遮罩\r\n        isHide:true,\r\n        //弹窗是否浏览器改变大小时显示在窗口中央\r\n        isCenter:true,\r\n        //是否全屏显示\r\n        isFull:false,\r\n        //是否在点击弹窗时将其置顶\r\n        isTop:false,\r\n        //是否以提示框展示，没有标题，按钮\r\n        isTips:false,\r\n        //是否拖动滚动条固定位置\r\n        isFixed:true,\r\n        //当内容超过弹出层容器，是否显示滚动条\r\n        scrollbar:true,\r\n        //按钮对齐方式\r\n        align:'center',\r\n        //是否以气泡形式展示，弹出层边缘会多出箭头\r\n        bubble:{\r\n            enable:false,\r\n            dir:'top'\r\n        },\r\n        //弹出层内容展示iframe，不建议跨域使用\r\n        iframe:{\r\n            enable:false,\r\n            cache:false,\r\n            src:''\r\n        },\r\n        //关闭按钮\r\n        close:{\r\n            enable:true,\r\n            text:'×'\r\n        },\r\n        //确定按钮\r\n        confirm:{\r\n            enable:false,\r\n            name:'normal',\r\n            text:'确定',\r\n            callback:function(){\r\n                return true\r\n            }\r\n        },\r\n        //取消按钮\r\n        cancel:{\r\n            enable:true,\r\n            text:'取消'\r\n        },\r\n        /*弹出层定位 top/left/right/bottom\r\n        position:{\r\n            top:10,\r\n            left:10\r\n        }\r\n        */\r\n        position:null,\r\n        /*将弹出层置于遮罩层底部\r\n        under:[layer1, layer2]\r\n        */\r\n        under:null,\r\n        /*配置按钮，若id为confirm/cancel/close将会覆盖内置按钮参数\r\n        button:[{\r\n            id:'confirm',\r\n            text:'确定',\r\n            name:'normal',\r\n            callback:function(){\r\n\r\n            }\r\n        }]\r\n        */\r\n        button:null,\r\n        //onInit：弹出层显示时回调\r\n        //onDestroy：弹出层注销时回调\r\n        //当拖动弹出层移动后回调\r\n        onMove:null,\r\n        //窗口改变大小位置时回调\r\n        onResize:null,\r\n        //容器滚动时回调\r\n        onScroll:null,\r\n        //弹窗销毁前回调，若返回false则不能销毁\r\n        onBeforeDestroy:null,\r\n        //定时关闭弹窗回调\r\n        onTimer:null\r\n    }\r\n\r\n    return this.extend(component, {\r\n        static:statics,\r\n        _options:options,\r\n        _template:{\r\n            layout:\r\n                '<div class=\"<% className %>\" style=\"<% include \\'style\\' %>\">'+\r\n                    '<div class=\"layer-box\">'+\r\n                        '<%if close%>'+\r\n                            '<% var btn = close %>'+\r\n                            '<% include \"button\" %>'+\r\n                        '<%/if%>'+\r\n                        '<%if bubble%>'+\r\n                        '<span class=\"layer-bubble layer-bubble-<%bubble%>\"><b></b><i></i></span>'+\r\n                        '<%/if%>'+\r\n                        '<%if title%>'+\r\n                        '<div class=\"layer-head\">'+\r\n                            '<span class=\"layer-title\"><%title%></span>'+\r\n                        '</div>'+\r\n                        '<%/if%>'+\r\n                        '<div class=\"layer-body\">'+\r\n                            '<div class=\"layer-main\">'+\r\n                            '<%content%>'+\r\n                            '</div>'+\r\n                        '</div>'+\r\n                        '<%if button && button.length%>'+\r\n                        '<div class=\"layer-foot\" style=\"text-align:<%align%>\">'+\r\n                        '<div class=\"layer-inner\">'+\r\n                        '<%each button btn%>'+\r\n                            '<%include \"button\"%>'+\r\n                        '<%/each%>'+\r\n                        '</div>'+\r\n                        '</div>'+\r\n                        '<%/if%>'+\r\n                    '</div>'+\r\n                '</div>',\r\n            button:\r\n                '<button class=\"ui-button'+\r\n                    '<%if btn.name%>'+\r\n                    '<%each [].concat(btn.name) name%> ui-button-<%name%><%/each%>'+\r\n                    '<%/if%> layer-button-<%btn.id%>\"'+\r\n                    '<%if btn.style%>'+\r\n                    ' style=\"<%each btn.style v n%><%n%>:<%v%>;<%/each%>\"'+\r\n                    '<%/if%>><%btn.text || \"按钮\"%></button>',\r\n            iframe:\r\n                '<iframe<%each attr%> <%$index%>=\"<%$value%>\"<%/each%>></iframe>',\r\n            mask:\r\n                '<div class=\"nui-layer-mask'+\r\n                    '<%if skin%> nui-layer-mask-<%skin%><%/if%>\" style=\"<%include \\'style\\'%>\">'+\r\n                    '<div class=\"layer-mask\"></div>'+\r\n                '</div>',\r\n            movemask:\r\n                '<div class=\"nui-layer-movemask'+\r\n                    '<%if skin%> nui-layer-movemask-<%skin%><%/if%>\" style=\"<%include \\'style\\'%>\">'+\r\n                '</div>',\r\n            style:\r\n                '<%each style%><%$index%>:<%$value%>;<%/each%>'\r\n        },\r\n        /*\r\n        top:弹窗距离窗口顶部距离\r\n        left:弹窗距离窗口左边距离\r\n        width:弹窗宽度\r\n        height:弹窗高度\r\n        */\r\n        data:{},\r\n        _init:function(){\r\n            this._zIndex = ++this.constructor._zIndex;\r\n            this._exec()\r\n        },\r\n        _exec:function(){\r\n            var self = this, opts = self._options, _class = self.constructor;\r\n            self._container = _class._jquery(opts.container);\r\n            if(self._container.length){\r\n                self._containerDOM = self._container.get(0);\r\n                if(self._containerDOM.tagName !== 'BODY'){\r\n                    self._window = self._container;\r\n                    self._isWindow = false;\r\n                    var pos = self._container.css('position');\r\n                    if(pos !== 'absolute' && pos !== 'relative'){\r\n                        self._container.css('position', 'relative')\r\n                    }\r\n                }\r\n                else{\r\n                    self._window = Nui.win;\r\n                    self._isWindow = true;\r\n                }\r\n                self._isFixed = opts.isFixed && !Nui.bsie6 && self._isWindow;\r\n                self._create();\r\n            }\r\n        },\r\n        _create:function(){\r\n            var self = this, opts = self._options;\r\n            var buttons = self._createButton(), isTitle = false;\r\n            if(opts.isTips !== true){\r\n                isTitle = typeof opts.title === 'string';\r\n            }\r\n            var data = self._tplData({\r\n                content:self._getContent(),\r\n                close:buttons.close,\r\n                button:buttons.button,\r\n                title:isTitle ? (opts.title||'温馨提示') : null,\r\n                bubble:opts.bubble.enable === true ? opts.bubble.dir : null,\r\n                align:opts.align || 'center',\r\n                style:{\r\n                    'z-index':self._zIndex,\r\n                    'position':'absolute',\r\n                    'display':'block'\r\n                }\r\n            });\r\n            if(self._isFixed){\r\n                data.style.position = 'fixed';\r\n            }\r\n            self._setTop();\r\n            self.element = self._bindComponentName($(self._tpl2html('layout', data)).appendTo(self._container));\r\n            self._box = self.element.children('.layer-box');\r\n\t\t\tself.head = self._box.children('.layer-head');\r\n\t\t\tself._body = self._box.children('.layer-body');\r\n\t\t\tself.main = self._body.children('.layer-main');\r\n\t\t\tself.foot = self._box.children('.layer-foot');\r\n            if(opts.isTips !== true){\r\n                if(opts.iframe.enable === true){\r\n                    self._iframe = self.main.children('iframe');\r\n                    self._iframeOnload()\r\n                }\r\n                if(opts.isMove === true && isTitle){\r\n                    self._bindMove();\r\n                }\r\n                if(opts.isTop === true){\r\n                    self._bindTop();\r\n                }\r\n            }\r\n            if(self._button.length){\r\n                self._buttonEvent();\r\n            }\r\n            if(opts.isFixed === true && !self._isFixed === true){\r\n                self._bindScroll()\r\n            }\r\n            self._event();\r\n            self._show()\r\n        },\r\n        _getContent:function(){\r\n            var self = this, opts = self._options, content = '';\r\n            if(opts.isTips !== true && opts.iframe.enable === true){\r\n                content = self._createIframe();\r\n            }\r\n            else{\r\n                if(typeof opts.content === 'string'){\r\n                    content = opts.content\r\n                }\r\n                else if(opts.content instanceof jQuery){\r\n                    content = opts.content.prop('outerHTML')\r\n                }\r\n            }\r\n            return content\r\n        },\r\n        _createIframe:function(){\r\n            var self = this, opts = self._options, name = 'layer-iframe'+self.__id, src = opts.iframe.src;\r\n            if(opts.iframe.cache === false){\r\n                src = util.setParam('_', new Date().getTime(), src)\r\n            }\r\n            return self._tpl2html('iframe', {\r\n                attr:{\r\n                    frameborder:'0',\r\n                    name:name,\r\n                    id:name,\r\n                    src:src,\r\n                    scroll:'hidden',\r\n                    style:'width:100%;'\r\n                }\r\n            })\r\n        },\r\n        _iframeOnload:function(){\r\n            var self = this;\r\n            self._iframe.load(function(){\r\n                self._iframeDocument = self._iframe.contents();\r\n                self._resize()\r\n            })\r\n        },\r\n        _createButton:function(){\r\n            var self = this, opts = self._options, defaults = {}, buttons = {}, caches = {};\r\n            self._button = [];\r\n            if(opts.isTips !== true){\r\n                Nui.each(['confirm', 'cancel'], function(id){\r\n                    var btn = opts[id];\r\n                    if(btn && btn.enable === true){\r\n                        defaults[id] = {\r\n                            id:id,\r\n                            name:btn.name,\r\n                            style:btn.style,\r\n                            text:btn.text,\r\n                            callback:btn.callback\r\n                        }\r\n                    }\r\n                });\r\n                if(opts.button && opts.button.length){\r\n                    Nui.each(opts.button, function(val){\r\n                        var id = val.id;\r\n                        if(!caches[id]){\r\n                            caches[id] = true;\r\n                            if(defaults[id]){\r\n                                if(!val.text){\r\n                                    if(id === 'cancel'){\r\n                                        val.text = '取消'\r\n                                    }\r\n                                    else if(id === 'confirm'){\r\n                                        val.text = '确定'\r\n                                    }\r\n                                }\r\n                                delete defaults[id]\r\n                            }\r\n                            self._button[id === 'close' ? 'unshift' : 'push'](val)\r\n                        }\r\n                    })\r\n                }\r\n                Nui.each(defaults, function(val){\r\n                    self._button.push(val)\r\n                });\r\n            }\r\n            if(!caches.close && opts.close && opts.close.enable === true){\r\n                self._button.unshift({\r\n                    id:'close',\r\n                    name:opts.close.name,\r\n                    style:opts.close.style,\r\n                    text:opts.close.text,\r\n                    callback:opts.close.callback\r\n                })\r\n            }\r\n            if(self._button[0] && self._button[0].id === 'close'){\r\n                buttons.close = self._button[0],\r\n                buttons.button = self._button.slice(1);\r\n            }\r\n            else{\r\n                buttons.button = self._button\r\n            }\r\n            return buttons\r\n        },\r\n        _buttonEvent:function(){\r\n            var self = this, opts = self._options;\r\n            Nui.each(self._button, function(val){\r\n                self._on('click', self.element, '.layer-button-'+val.id, function(e, button){\r\n                    if(!button.hasClass('nui-button-disabled')){\r\n                        var id = val.id, callback = val.callback;\r\n                        var isCall = typeof callback === 'function' ? callback.call(opts, e, self, button) : null;\r\n                        if((id === 'confirm' && isCall === true) || (id !== 'confirm' && isCall !== false)){\r\n                            self.destroy()\r\n                        }\r\n                    }\r\n                })\r\n            })\r\n        },\r\n        _bindTop:function(){\r\n            var self = this;\r\n            self._on('click', self.element, function(){\r\n                self._setzIndex();\r\n            });\r\n        },\r\n        _bindMove:function(){\r\n            var self = this, opts = self._options, element = self.element;\r\n            var _class = self.constructor, elem = element, isMove = false, x, y, _x, _y;\r\n            self._on('mousedown', self.head, function(e, ele){\r\n                isMove = true;\r\n                self._setzIndex();\r\n                if(opts.isMoveMask === true){\r\n                    elem = self._moveMask = $(self._tpl2html('movemask', {\r\n                        skin:opts.skin,\r\n                        style:{\r\n                            'z-index':self._zIndex+1,\r\n                            'cursor':'move',\r\n                            'position':self._isFixed ? 'fixed' : 'absolute'\r\n                        }\r\n                    })).appendTo(self._container);\r\n                    elem.css({\r\n                        width:self.data.outerWidth - _class._getSize(elem, 'lr', 'all'),\r\n                        height:self.data.outerHeight - _class._getSize(elem, 'tb', 'all'),\r\n                        top:self.data.top,\r\n                        left:self.data.left\r\n                    });\r\n                }\r\n                ele.css('cursor','move');\r\n                x = e.pageX - self.data.left;\r\n                y = e.pageY - self.data.top;\r\n                e.stopPropagation();\r\n            });\r\n            self._on('mousemove', Nui.doc, function(e){\r\n                var width = self._container.outerWidth(), height = self._container.outerHeight();\r\n                if(isMove){\r\n                    _x = e.pageX - x;\r\n                    _y = e.pageY - y;\r\n                    _x < 0 && (_x = 0);\r\n                    _y < 0 && (_y = 0);\r\n                    if(opts.isInnerMove === true){\r\n                        _x + self.data.outerWidth > width && (_x = width - self.data.outerWidth);\r\n                        _y + self.data.outerHeight > height && (_y = height - self.data.outerHeight);\r\n                    }\r\n                    self.data.top = _y;\r\n                    self.data.left = _x;\r\n                    elem.css({top:_y, left:_x});\r\n                    return !isMove;\r\n                }\r\n            });\r\n            self._on('mouseup', Nui.doc, function(e){\r\n                if(isMove){\r\n                    isMove = false;\r\n                    self.head.css('cursor','default');\r\n                    if(opts.isMoveMask === true){\r\n                        element.css(self.data);\r\n                        self._moveMask.remove();\r\n                        self._moveMask = null;\r\n                    }\r\n                    if(typeof opts.onMove === 'function'){\r\n                        opts.onMove.call(opts, self)\r\n                    }\r\n                    self.data.offsetTop = self.data.top - self._window.scrollTop();\r\n                    self.data.offsetLeft = self.data.left - self._window.scrollLeft();\r\n                }\r\n            });\r\n        },\r\n        _bindScroll:function(){\r\n            var self = this, opts = self._options;\r\n            self._on('scroll', self._window, function(){\r\n                var top = self.data.offsetTop + self._window.scrollTop();\r\n                var left = self.data.offsetLeft + self._window.scrollLeft();\r\n                self.data.top = top;\r\n                self.data.left = left;\r\n                self.element.css(self.data);\r\n                if(typeof opts.onScroll === 'function'){\r\n                    opts.onScroll.call(opts, self)\r\n                }\r\n            })\r\n        },\r\n        //鼠标点击弹出层将弹出层层级设置最大\r\n        _setzIndex:function(){\r\n            var self = this, _class = self.constructor;\r\n            if(self._isTop && self.element){\r\n                self._isTop = false;\r\n                self._zIndex = ++_class._zIndex;\r\n                self.element.css('zIndex', self._zIndex);\r\n                self._setTop();\r\n            }\r\n        },\r\n        _setLower:function(destroy){\r\n            var self = this, _class = self.constructor, opts = self._options, unders = [];\r\n            if(opts.under){\r\n                unders = unders.concat(opts.under);\r\n                if(unders.length){\r\n                    Nui.each(unders, function(obj, k){\r\n                        if(obj && obj.element){\r\n                            obj.element.css('z-index', destroy ? obj._zIndex : _class._maskzIndex-1)\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        },\r\n        _setTop:function(){\r\n            var self = this, _class = self.constructor;\r\n            Nui.each(_class.__instances, function(val){\r\n                if(val && val !== self && val._options.isTop === true){\r\n                    val._isTop = true;\r\n                }\r\n            });\r\n        },\r\n        _position:function(){\r\n            var self = this, data = self.data, pos = self._options.position;\r\n            var _pos = {\r\n                top:pos.top,\r\n                left:pos.left,\r\n                right:pos.right,\r\n                bottom:pos.bottom\r\n            }, _v;\r\n\r\n            if(_pos.top !== undefined && _pos.bottom !== undefined){\r\n                delete _pos.bottom\r\n            }\r\n\r\n            if(_pos.left !== undefined && _pos.right !== undefined){\r\n                delete _pos.right\r\n            }\r\n\r\n            Nui.each(_pos, function(v, k){\r\n                if(v === undefined){\r\n                    delete _pos[k];\r\n                    return true;\r\n                }\r\n                _v = v;\r\n                if(typeof v === 'string'){\r\n                    if(!v){\r\n                        _v = 0\r\n                    }\r\n                    else{\r\n                        if(k === 'top' || k === 'bottom'){\r\n                            if(v === 'self'){\r\n                                _v = data.outerHeight\r\n                            }\r\n                            else if(/[\\+\\-\\*\\/]/.test(v)){\r\n                                _v = (new Function('var self = '+data.outerHeight+'; return '+v))()\r\n                            }\r\n                        }\r\n                        else{\r\n                            if(v === 'self'){\r\n                                _v = data.outerWidth\r\n                            }\r\n                            else if(/[\\+\\-\\*\\/]/.test(v)){\r\n                                _v = (new Function('var self = '+data.outerWidth+'; return '+v))()\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                _pos[k] = _v === 'auto' ? 'auto' : parseFloat(_v)+'px'\r\n            })\r\n\r\n            return _pos\r\n        },\r\n        _resize:function(type){\r\n            var self = this, _class = self.constructor, opts = self._options, element = self.element;\r\n            var wWidth = self._window.outerWidth();\r\n            var wHeight = self._window.outerHeight();\r\n            var stop = 0;\r\n            var sleft = 0;\r\n            if(!self._isFixed){\r\n                sleft = self._window.scrollLeft();\r\n                stop = self._window.scrollTop();\r\n            }\r\n            self._setSize();\r\n            if(opts.position){\r\n                var pos = element.css(self._position()).position();\r\n                if(Nui.bsie6){\r\n                    sleft = 0;\r\n                    stop = 0;\r\n                }\r\n                self.data.left = pos.left + sleft;\r\n                self.data.top = pos.top + stop;\r\n            }\r\n            else{\r\n                if(type === 'init' || opts.isCenter === true){\r\n                    var left = (wWidth - self.data.outerWidth) / 2 + sleft;\r\n                    var top = (wHeight - self.data.outerHeight) / 2 + stop;\r\n                    var edge = opts.edge > 0 ? opts.edge : 0;\r\n                    self.data.left = left > 0 ? left : edge;\r\n                    self.data.top = top > 0 ? top : edge;\r\n                }\r\n            }\r\n            self.data.offsetTop = self.data.top - self._window.scrollTop();\r\n            self.data.offsetLeft = self.data.left - self._window.scrollLeft();\r\n            element.css(self.data);\r\n        },\r\n        _setSize:function(){\r\n            var self = this, _class = self.constructor, opts = self._options, element = self.element;\r\n            var edge = opts.edge > 0 ? opts.edge*2 : 0;\r\n            var wWidth = self._window.outerWidth() - edge;\r\n            var wHeight = self._window.outerHeight() - edge;\r\n            var scrollbar = opts.scrollbar;\r\n\r\n            self._body.css({height:'auto', overflow:'visible'});\r\n            element.css({top:'auto', left:'auto', width:'auto', height:'auto'});\r\n            \r\n            var edgeSize = _class._getSize(self._box, 'tb', 'all') +\r\n                self.head.outerHeight() + \r\n                _class._getSize(self.head, 'tb', 'margin') + \r\n                _class._getSize(self._body, 'tb', 'all') + \r\n                self.foot.outerHeight() + \r\n                _class._getSize(self.foot, 'tb', 'margin');\r\n\r\n            var width = element.outerWidth();\r\n            if(opts.isFull !== true){\r\n                if(opts.width > 0){\r\n                    width = opts.width\r\n                }\r\n                else if(opts.width === '100%' || (opts.scrollbar === true && width > wWidth)){\r\n                    width = wWidth;\r\n                }\r\n                if(opts.maxWidth > 0 && width >= opts.maxWidth){\r\n                    scrollbar = true;\r\n                    width = opts.maxWidth\r\n                }\r\n            }\r\n            else{\r\n                width = wWidth;\r\n            }\r\n\r\n            var ws = 'nowrap';\r\n            if(opts.width > 0 || width == opts.maxWidth || width == wWidth){\r\n                ws = 'normal';\r\n            }\r\n\r\n            self.data.width = width - _class._getSize(element, 'lr', 'all');\r\n            self.main.css('white-space', ws);\r\n            element.width(self.data.width);\r\n\r\n            var height = element.outerHeight();\r\n            if(self._iframeDocument){\r\n                self._iframeDocument[0].layer = self;\r\n                height = edgeSize + self._iframeDocument.find('body').outerHeight();\r\n            }\r\n\r\n            if(opts.isFull !== true){\r\n                if(opts.height > 0){\r\n                    height = opts.height\r\n                }\r\n                else if(opts.height === '100%' || ((opts.scrollbar === true || self._iframeDocument) && height > wHeight)){\r\n                    height = wHeight\r\n                }\r\n                if(opts.maxHeight > 0 && height >= opts.maxHeight){\r\n                    scrollbar = true;\r\n                    height = opts.maxHeight\r\n                }\r\n            }\r\n            else{\r\n                height = wHeight\r\n            }\r\n\r\n            self.data.outerWidth = width;\r\n            self.data.outerHeight = height;\r\n            self.data.height = height - _class._getSize(element, 'tb', 'all');\r\n            element.height(self.data.height);\r\n            var _height = self.data.height - edgeSize;\r\n\r\n            if(self.main.outerHeight() > _height && !self._iframe && scrollbar === true){\r\n                self._body.css('overflow', 'auto')\r\n            }\r\n            if(self._iframe){\r\n                self._iframe.height(_height);\r\n            }\r\n            self._body.height(self.data.contentHeight = _height)\r\n        },\r\n        _showMask:function(){\r\n            var self = this, _class = self.constructor, opts = self._options;\r\n            if(!self._containerDOM.__layermask__){\r\n                self._containerDOM.__layermask__ = $(self._tpl2html('mask', {\r\n                    skin:opts.skin,\r\n                    style:{\r\n                        'z-index':_class._maskzIndex,\r\n                        'position':self._isFixed ? 'fixed' : 'absolute',\r\n                        'top':'0px',\r\n                        'left':'0px',\r\n                        'width':'100%',\r\n                        'height':self._isFixed ? '100%' : self._container.outerHeight()+'px'\r\n                    }\r\n                })).appendTo(self._container);\r\n            }\r\n            if(opts.isClickMask === true){\r\n                self._on('click', self._containerDOM.__layermask__, function(){\r\n                    self.hide()\r\n                })\r\n            }\r\n        },\r\n        _show:function(){\r\n            var self = this, opts = self._options;\r\n            component.init(self.main);\r\n            self._resize('init');\r\n            self._setLower();\r\n            if(opts.isMask === true){\r\n                self._showMask()\r\n            }\r\n            if(opts.timer > 0){\r\n                self._time = opts.timer;\r\n                self._timer();\r\n            }\r\n            if(typeof opts.onInit === 'function'){\r\n                opts.onInit.call(opts, self)\r\n            }\r\n            return self\r\n        },\r\n        _timer:function(){\r\n            var self = this, opts = self._options;\r\n            if(self._time > 0){\r\n                if(typeof opts.onTimer === 'function'){\r\n                    opts.onTimer.call(opts, self, self._time)\r\n                }\r\n                self._timerid = setTimeout(function(){\r\n                    self._time -= 1000;\r\n                    self._timer();\r\n                }, self._time > 1000 ? 1000 : self._time)\r\n            }\r\n            else{\r\n                self.hide()\r\n            }\r\n        },\r\n        _reset:function(){\r\n            var self = this, _class = self.constructor, noMask = true;\r\n            component.exports._reset.call(this);\r\n            component('destroy', self.main);\r\n            Nui.each(_class.__instances, function(val){\r\n                if(val && val._options.isMask === true && val !== self && val._containerDOM === self._containerDOM){\r\n                    return (noMask = false);\r\n                }\r\n            });\r\n            if(noMask && self._containerDOM.__layermask__){\r\n                self._containerDOM.__layermask__.remove();\r\n                self._containerDOM.__layermask__  = null;\r\n            }\r\n            if(self._options.timer > 0){\r\n                self.timer = 0;\r\n                clearTimeout(self._timerid);\r\n            }\r\n        },\r\n        resize:function(){\r\n            var self = this, opts = self._options, element = self.element;\r\n            self._resize();\r\n            if(typeof opts.onResize === 'function'){\r\n                opts.onResize.call(opts, self)\r\n            }\r\n            return self\r\n        },\r\n        hide:function(){\r\n            if(this._options.isHide === true){\r\n                this.destroy()\r\n            }\r\n        },\r\n        destroy:function(){\r\n            var self = this, _class = self.constructor, opts = self._options;\r\n            if(typeof opts.onBeforeDestroy === 'function' && \r\n                opts.onBeforeDestroy.call(opts, self) === false){\r\n                return\r\n            }\r\n            self._delete();\r\n            self._reset();\r\n            self._setLower(true);\r\n            if(!self._isdestroy){\r\n                _class._zIndex--;\r\n                self._isdestroy = true;\r\n            }\r\n            if(typeof opts.onDestroy === 'function'){\r\n                opts.onDestroy.call(opts, self)\r\n            }\r\n        }\r\n    })\r\n});\n/**\r\n * @author Aniu[2016-11-10 22:39]\r\n * @update Aniu[2016-11-10 22:39]\r\n * @version 1.0.1\r\n * @description layer扩展\r\n */\r\n\r\nNui.define('src/components/layer/layerExt',['src/components/layer/layer', 'util'], function(layer, util){\r\n    var module = this;\r\n\r\n    layer.alert = function(content, title, width, height){\r\n        var opts;\r\n        if(typeof content === 'object'){\r\n            opts = content;\r\n            content = opts.content;\r\n            delete opts.content;\r\n        }\r\n        return layer($.extend({\r\n            content:'<div style=\"padding:10px; line-height:20px;\">'+(content||'')+'</div>',\r\n            title:title,\r\n            width:width,\r\n            height:height,\r\n            cancel:{\r\n                text:'关闭'\r\n            }\r\n        }, opts||{}))\r\n    }\r\n\r\n    layer.confirm = function(content, callback, title, width, height){\r\n        var opts;\r\n        if(typeof content === 'object'){\r\n            opts = content;\r\n            content = opts.content;\r\n            delete opts.content;\r\n        }\r\n        return layer($.extend(true, {\r\n            content:'<div style=\"padding:10px; line-height:20px;\">'+(content||'')+'</div>',\r\n            title:title,\r\n            width:width,\r\n            height:height,\r\n            align:'right',\r\n            confirm:{\r\n                callback:callback||function(){\r\n                    return true\r\n                }\r\n            }\r\n        }, opts||{}, {\r\n            confirm:{\r\n                enable:true\r\n            }\r\n        }))\r\n    }\r\n\r\n    layer.iframe = function(src, title, width, height){\r\n        return layer({\r\n            iframe:{\r\n                enable:true,\r\n                src:src\r\n            },\r\n            title:title,\r\n            width:width,\r\n            height:height,\r\n            cancel:{\r\n                text:'关闭'\r\n            }\r\n        })\r\n    }\r\n\r\n    layer.tips = function(content, dir, position, width, height){\r\n        var opts;\r\n        if(typeof content === 'object'){\r\n            opts = content;\r\n            content = opts.content;\r\n            delete opts.content;\r\n        }\r\n        return layer($.extend(true, {\r\n            content:content,\r\n            id:'tips',\r\n            width:width||'auto',\r\n            height:height||'auto',\r\n            position:position,\r\n            bubble:{\r\n                enable:true,\r\n                dir:dir||'top'\r\n            }\r\n        }, opts||{}, {\r\n            isTips:true,\r\n            isMask:false,\r\n            isClose:false,\r\n            close:{\r\n                enable:false\r\n            }\r\n        }))\r\n    }\r\n\r\n    layer.loading = function(content, width, height){\r\n        var opts;\r\n        if(typeof content === 'object'){\r\n            opts = content;\r\n            content = opts.content;\r\n            delete opts.content;\r\n        }\r\n        if(Nui.type(content, 'Number')){\r\n            height = width;\r\n            width = content;\r\n            content = '';\r\n        }\r\n        return layer($.extend({\r\n            content:'<div>'+(content||'正在加载数据...')+'</div>',\r\n            width:width||'auto',\r\n            height:height||'auto',\r\n        }, opts || {}, {\r\n            id:'loading',\r\n            isTips:true,\r\n            close:{\r\n                enable:false\r\n            }\r\n        }))\r\n    }\r\n\r\n    layer.message = function(type, content){\r\n        var opts, color = '#f00';\r\n        if(typeof type === 'object'){\r\n            opts = type;\r\n            content = opts.content;\r\n            delete opts.content;\r\n            type = 'success';\r\n        }\r\n\r\n        if(type !== 'success' && type !== 'error'){\r\n            content = type;\r\n            type = 'success';\r\n        }\r\n\r\n        if(type === 'success' && !content){\r\n            content = '操作成功'\r\n        }\r\n        else if(type === 'error' && !content){\r\n            content = '操作失败'\r\n        }\r\n\r\n        if(type === 'success'){\r\n            color = '#39B54A';\r\n        }\r\n\r\n        return layer($.extend({\r\n            content:'<div style=\"padding:10px; color:'+ color +';\">'+content+'</div>',\r\n            id:'message',\r\n            width:'auto',\r\n            height:'auto',\r\n            isTips:true,\r\n            timer:1500,\r\n            close:{\r\n                enable:true\r\n            }\r\n        }, opts || {}, {\r\n            isMask:false\r\n        }))\r\n    }\r\n\r\n    layer.form = function(options){\r\n        var onInit = options.onInit;\r\n        delete options.onInit;\r\n        var valid = options.valid;\r\n        var btns = $.extend([], options.button || [{\r\n            id:'cancel',\r\n            text:'关闭'\r\n        }, { \r\n            id:'confirm',\r\n            name:'normal',\r\n            text:'保存'\r\n        }])\r\n\r\n        Nui.each(btns, function(val, i){\r\n            if(val.id === 'confirm' && !val.callback){\r\n                btns[i].callback = function(e, self){\r\n                    self.main.find('form').submit()\r\n                }\r\n                return false\r\n            }\r\n        })\r\n\r\n        delete options.button;\r\n        var formLayer = layer($.extend(true, {button:btns}, {\r\n            scrollbar:false,\r\n            id:'form',\r\n            onInit:function(self){\r\n                var main = self.main;\r\n                var elems = main.find('[name!=\"\"][data-rule]');\r\n                var form = main.find('form');\r\n                var rules = {};\r\n                var messages = {};\r\n                var setting = form.data('setting');\r\n                elems.each(function(){\r\n                    var elem = $(this);\r\n                    var name = elem.attr('name');\r\n                    var data = elem.data();\r\n                    var rule = eval('('+ data.rule +')');\r\n                    rules[name] = rule;\r\n                    if(typeof data.message !== 'undefined'){\r\n                        var message = eval('('+ data.message +')');\r\n                        $.each(message, function(key, msg){\r\n                            if(typeof self._options.messageFilter === 'function'){\r\n                                message[key] = self._options.messageFilter.call(self._options, name, msg)||''\r\n                            }\r\n                        })\r\n                        messages[name] = message;\r\n                    } \r\n                });\r\n                var opts = {\r\n                    rules:rules,\r\n                    messages:messages,\r\n                    errorClass:'s-err',\r\n\t\t\t\t\tonkeyup:false,\r\n\t\t\t\t\tfocusInvalid:false,\r\n                    onfocusout:false,\r\n\t\t\t\t\tfocusCleanup:true,\r\n                    ignore:'',\r\n                    success:function(error, element) {\r\n\t\t\t\t\t\terror.remove();\r\n\t\t\t\t\t\t$(element).addClass('s-succ');\r\n\t\t\t\t\t},\r\n\t\t\t\t\terrorPlacement:function(error, element) {\r\n\t\t\t\t\t\telement.removeClass('s-succ');\r\n\t\t\t\t\t\tif(error.text()){\r\n\t\t\t\t\t\t\telement.closest(self._options.itemWrap||'.ui-item').find(self._options.errorWrap||'.ui-err').html(error);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n                    submitHandler:function(){\r\n                        var param = {};\r\n                        if(typeof self._options.getData === 'function'){\r\n                        \tparam = self._options.getData.call(self._options, self, form)\r\n                        }\r\n                        else{\r\n                            param = util.getData(form).result;\r\n                        }\r\n\r\n                        if(typeof self._options.onBeforeSubmit === 'function'){\r\n                        \tparam = self._options.onBeforeSubmit.call(self._options, self, param);\r\n                            if(param === false){\r\n                                return false\r\n                            }\r\n                        }\r\n\r\n                        var loading = layer.loading({\r\n                            content:self._options.loading||'正在保存数据...',\r\n                            under:self\r\n                        });\r\n                        \r\n                        $.ajax($.extend({\r\n                            url:form.attr('action'),\r\n                            dataType:'json',\r\n                            type:form.attr('method')||'POST',\r\n                            data:param,\r\n                            success:function(res, xhr){\r\n                                loading.hide();\r\n                                if(typeof self._options.onSuccess === 'function'){\r\n                                    self._options.onSuccess.call(self._options, self, res, xhr)\r\n                                }\r\n                            },\r\n                            error:function(xhr){\r\n                                loading.hide();\r\n                                if(typeof self._options.onError === 'function'){\r\n                                    self._options.onError.call(self._options, self, xhr)\r\n                                }\r\n                            }\r\n                        }, self._options.ajax||{}), null)\r\n                    }\r\n                }\r\n                self.validator = form.validate($.extend(true, opts, setting||{}, valid||{}));\r\n                typeof onInit === 'function' && onInit.call(self._options, self)\r\n            }\r\n        }, options||{}))\r\n        return formLayer\r\n    }\r\n\r\n    return layer\r\n})\nNui.define('./script/events/page',['template', 'events', 'src/components/layer/layerExt'], function(template, events, layer){\r\n\r\n    var evt = events({\r\n        elem:$('#data'),\r\n        data:['蔬菜', '水果', '苹果'],\r\n        template:this.renders(''+''\r\n            +'<%each $list%>'+''\r\n            +'<li class=\"e-mt5\">'+''\r\n                +'<label>'+''\r\n                    +'<input type=\"checkbox\" value=\"<%$index%>\">'+''\r\n                    +'<span><%$value%></span>'+''\r\n                +'</label>'+''\r\n            +'</li>'+''\r\n            +'<%/each%>'+''\r\n        +''),\r\n        events:{\r\n            'click .j-add':'add render',\r\n            'click .j-del':'checks del remove render',\r\n            'click .j-update':'checks update'\r\n        },\r\n        checks:function(){\r\n            var arr = [], elems = this.elem.find(':checked');\r\n            if(!this.elem.find(':checked').length){\r\n                return false\r\n            }\r\n            this.elem.find(':checked').each(function(){\r\n                arr.push($(this).val())\r\n            })\r\n            return arr\r\n        },\r\n        render:function(){\r\n            this.elem.html(template.render(this.template, this.data))\r\n        },\r\n        add:function(e, elem, data){\r\n            this.data.push('自定义');\r\n        },\r\n        remove:function(){\r\n            var data = [];\r\n            Nui.each(this.data, function(v){\r\n                if(typeof v !== 'undefined'){\r\n                    data.push(v)\r\n                }\r\n            });\r\n            this.data = data;\r\n        },\r\n        del:function(e, elem, data){\r\n            var that = this;\r\n            Nui.each(data, function(v){\r\n                delete that.data[v]\r\n            });\r\n        },\r\n        update:function(e, elem, data){\r\n            var that = this;\r\n            layer.confirm('<input type=\"text\" style=\"border:1px solid #ccc; width:180px; height:24px;\" />', function(e, self){\r\n                var val = Nui.trim(self.main.find('input').val());\r\n                if(val){\r\n                    Nui.each(data, function(v){\r\n                        that.data[v] = val;\r\n                    })\r\n                    that.render();\r\n                    return true\r\n                }\r\n            }, '', 210)\r\n        }\r\n    })\r\n\r\n    evt.render()\r\n})\n"]}