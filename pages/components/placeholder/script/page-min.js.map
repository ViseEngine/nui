{"version":3,"sources":["page-debug.js"],"names":["Nui","define","component","this","extend","_options","text","animate","equal","restore","color","onChange","_template","list","wrap","elem","_exec","self","opts","target","_getTarget","_deftext","attr","undefined","_val","trim","val","_text","_create","_class","constructor","document","createElement","_setStyle","removeAttr","data","_tplData","style","position","display","width","outerWidth","overflow","cursor","_tpl2html","element","$","height","outerHeight","isText","is","left","_getSize","top","line-height","insertAfter","_events","className","__id","addClass","_createStyle","_createRules","head","appendChild","sheet","id","deleteRule","e","each","v","selector","rules","addRule","insertRule","pleft","_on","focus","stop","opacity","value","hide","show","_reset","_off","remove","unwrap","removeClass","arguments","length","_callback","placeholder","events","focus :text","blur :text"],"mappings":"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","file":"page-min.js.map?v=f1e241e","sourcesContent":["/**\r\n * @author Aniu[2016-11-10 22:39]\r\n * @update Aniu[2016-11-10 22:39]\r\n * @version 1.0.1\r\n * @description 输入框占位符\r\n */\r\n\r\nNui.define('src/components/placeholder',['component'], function(component){\r\n    return this.extend(component, {\r\n        _options:{\r\n            /**\r\n             * @func 输入框占位提示文本，若元素上含有placeholder属性将会覆盖该值\r\n             * @type <String>\r\n             */\r\n            text:'',\r\n            /**\r\n             * @func 是否启用动画形式展示\r\n             * @type <Boolean>\r\n             */\r\n            animate:false,\r\n            /**\r\n             * @func 输入框值是否可以和占位符相同\r\n             * @type <Boolean>\r\n             */\r\n            equal:false,\r\n            /**\r\n             * @func 销毁或者重置组件是否还原默认值\r\n             * @type <Boolean>\r\n             */\r\n            restore:true,\r\n            /**\r\n             * @func 占位符文本颜色\r\n             * @type <String>\r\n             */\r\n            color:'#ccc',\r\n            /**\r\n             * @func 调用value方法后执行回调\r\n             * @type <Function>\r\n             */\r\n            onChange:null\r\n        },\r\n        _template:{\r\n            list:'<%each style%><%$index%>:<%$value%>;<%/each%>',\r\n            wrap:'<strong class=\"<% className %>\" style=\"<%include \\'list\\'%>\" />',\r\n            elem:'<b style=\"<%include \\'list\\'%>\"><%text%></b>'\r\n        },\r\n        _exec:function(){\r\n            var self = this, opts = self._options, target = self._getTarget();\r\n            if(target){\r\n                var text = self._deftext = target.attr('placeholder');\r\n                if(!self._deftext && opts.text){\r\n                    target.attr('placeholder', text = opts.text)\r\n                }\r\n                if(self._val === undefined){\r\n                    self._val = Nui.trim(target.val());\r\n                }\r\n                if(self._text = Nui.trim(text)){\r\n                    self._create()\r\n                }\r\n            }\r\n        },\r\n        _create:function(){\r\n            var self = this, opts = self._options, _class = self.constructor;\r\n            if(opts.animate || (!opts.animate && !('placeholder' in document.createElement('input')))){\r\n                if(opts.animate){\r\n                    self.target.removeAttr('placeholder')\r\n                }\r\n                var data = self._tplData();\r\n                data.style = {\r\n                    'position':'relative',\r\n                    'display':'inline-block',\r\n                    'width':self.target.outerWidth()+'px',\r\n                    'overflow':'hidden',\r\n                    'cursor':'text'\r\n                }\r\n                self.target.wrap(self._tpl2html('wrap', data))\r\n                self.element = $(self._tpl2html('elem', {\r\n                        text:self._text,\r\n                        style:(function(){\r\n                            var height = self.target.outerHeight();\r\n                            var isText = self.target.is('textarea');\r\n                            return ({\r\n                                'display':Nui.trim(self.target.val()) ? 'none' : 'inline',\r\n                                'position':'absolute',\r\n                                'left':_class._getSize(self.target, 'l', 'padding')+_class._getSize(self.target, 'l')+'px',\r\n                                'top':_class._getSize(self.target, 't', 'padding')+_class._getSize(self.target, 't')+'px',\r\n                                'height':isText ? 'auto' : height+'px',\r\n                                'line-height':isText ? 'normal' : height+'px',\r\n                                'color':opts.color\r\n                            })\r\n                        })()\r\n                    })).insertAfter(self.target)\r\n\r\n                self._events()\r\n            }\r\n            else{\r\n                self._setStyle()\r\n            }\r\n        },\r\n        _setStyle:function(){\r\n            var self = this, opts = self._options;\r\n            self.className = '_placeholder-'+self.__id;\r\n            self.target.addClass(self.className);\r\n            if(!self.constructor.style){\r\n                self._createStyle()\r\n            }\r\n            self._createRules()\r\n        },\r\n        _createStyle:function(){\r\n            var self = this;\r\n            var style = document.createElement('style');\r\n            document.head.appendChild(style);\r\n            self.constructor.style = style.sheet\r\n        },\r\n        _createRules:function(){\r\n            var self = this;\r\n            var sheet = self.constructor.style;\r\n            var id = self.__id;\r\n            try{\r\n                sheet.deleteRule(id)\r\n            }\r\n            catch(e){}\r\n            Nui.each(['::-webkit-input-placeholder', ':-ms-input-placeholder', '::-moz-placeholder'], function(v){\r\n                var selector = '.'+self.className+v;\r\n                var rules = 'opacity:1; color:'+(self._options.color||'');\r\n                try{\r\n                    if('addRule' in sheet){\r\n                        sheet.addRule(selector, rules, id)\r\n                    }\r\n                    else if('insertRule' in sheet){\r\n                        sheet.insertRule(selector + '{' + rules + '}', id)\r\n                    }\r\n                }\r\n                catch(e){}\r\n            })\r\n        },\r\n        _events:function(){\r\n            var self = this, opts = self._options, _class = self.constructor;\r\n            var pleft = _class._getSize(self.target, 'l', 'padding') + _class._getSize(self.target, 'l');\r\n            self._on('click', self.element, function(){\r\n                self.target.focus()\r\n            })\r\n\r\n            self._on('focus', self.target, function(){\r\n                opts.animate && self.element.stop(true, false).animate({left:pleft+10, opacity:'0.5'});\r\n            })\r\n\r\n            self._on('blur change', self.target, function(e, elem){\r\n                self.value();\r\n            })\r\n\r\n            self._on('keyup keydown', self.target, function(e, elem){\r\n                Nui.trim(elem.val()) ? self.element.hide() : self.element.show()\r\n            })\r\n        },\r\n        _reset:function(){\r\n            var self = this;\r\n            self._off();\r\n            if(self.element){\r\n                self.element.remove();\r\n                self.target.unwrap();\r\n            }\r\n            if(self._options.restore === true){\r\n                self.target.val(self._val)\r\n            }\r\n            self.target.removeClass(self.className);\r\n            if(self._deftext){\r\n                self.target.attr('placeholder', self._deftext)\r\n            }\r\n            else{\r\n                self.target.removeAttr('placeholder')\r\n            }\r\n        },\r\n        value:function(val){\r\n            var _class = this.constructor, target = this.target;\r\n            var pleft = _class._getSize(target, 'l', 'padding') + _class._getSize(target, 'l');\r\n            var v = Nui.trim(!arguments.length ? target.val() : target.val(val).val());\r\n            if((!this._options.equal && v === this.text) || !v){\r\n                target.val('');\r\n                this.element && this.element.show();\r\n                if(this._options.animate){\r\n                    this.element.stop(true, false).animate({left:pleft, opacity:'1'})\r\n                }\r\n            }\r\n            else if(this.element){\r\n                this.element.hide()\r\n            }\r\n            this._callback('Change');\r\n        }\r\n    })\r\n})\r\n\nNui.define('./script/page',['src/components/placeholder', 'events'], function(placeholder, events){\r\n    events({\r\n        events:{\r\n            'focus :text':function(e, elem){\r\n                elem.placeholder({\r\n                    text:'19920604',\r\n                    restore:false\r\n                })\r\n            },\r\n            'blur :text':function(e, elem){\r\n                elem.placeholder('destroy')\r\n            }\r\n        }\r\n    })\r\n})\n"]}