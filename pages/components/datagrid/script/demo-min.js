Nui.define('src/components/paging',['component'],function(t){return this.extend(t,{static:{},options:{},_init:function(){this._exec()},_exec:function(){}})}),Nui.define('src/components/datagrid',['component'],function(t){var e=this;e.require('src/components/paging');return e.extend(t,{static:{_init:function(){var t=this;Nui.doc.on('click',function(){Nui.each(t.__instances,function(t){!0===t.options.isActive&&t.element.find('.datagrid-tbody table-row.s-crt').removeClass('s-crt')})})},_hasChildren:function(t){return Nui.isArray(t.children)&&t.children.length},_getRowNumber:function(t,e,i,a,n){var l=this;return i[e]||(i[e]=!0),void 0===a&&(a=0),Nui.each(t,function(t){t.cellid=a++,n&&n.fixed&&(t.fixed=n.fixed),l._hasChildren(t)&&(a=l._getRowNumber(t.children,e+1,i,a,t))}),n?a:i.length},_colspan:function(t,e){var i=this;return void 0===e&&(e=0),Nui.each(t,function(t){i._hasChildren(t)?e+=i._colspan(t.children,e):e+=1}),e}},options:{data:null,columns:null,isFixed:!0,isLine:!1,isActive:!0,isBorder:!0,url:null,paging:null,onFilter:null,onClick:null,onFocusin:null,onFocusout:null,onFocus:null,onBlur:null,onRowClick:null,onRowDblclick:null},_template:{layout:'<div class="<% className %>"><div class="datagrid-body"><div class="datagrid-main"><%include "table"%></div><%if paging%><div class="datagrid-paging"></div><%/if%></div></div>',table:'<%each rows v k%><%if v.length%><div class="datagrid-table<%if k === "left" || k === "right"%> datagrid-table-fixed<%/if%> datagrid-table-<%k%>"><div class="datagrid-thead"><table class="ui-table"><thead class="table-thead"><%each v%><tr class="table-row"><%each $value val%><th class="table-cell"<%include "attr"%>><span class="cell-text"><%val.title%></span></th><%/each%></tr><%/each%></thead><%if isFixed !== true%><tbody class="table-tbody datagrid-inner"></tbody><%/if%></table></div><%if isFixed === true%><div class="datagrid-inner"></div><%/if%></div><%/if%><%/each%>',tbody:'<%if isFixed === true%><div class="datagrid-tbody"><table class="ui-table"><tbody class="table-tbody"><%include "rows"%></tbody></table></div><%else%><%include "rows"%><%/if%>',rows:'<%if list && list.length%><%each list%><tr class="table-row" data-row-index="<%$index%>"><%each fields val key%><%each $value v k%><%if val.field === k%><td class="table-cell"<%include "attr"%>><span class="cell-text"><%v%></div></td><%return false%><%/if%><%/each%><%/each%></tr><%/each%><%else%><tr><td class="table-cell"></td></tr><%/if%>',head:'',foot:'',attr:'<%each val value name%><%if "width field align valign nowrap colspan rowspan cellid".indexOf(name) !== -1%> <%name%>="<%value%>"<%/if%><%/each%>'},_init:function(){this._exec()},_exec:function(){var t=this,e=t.options;t._getTarget()&&Nui.isArray(e.columns)&&e.columns.length&&(t._columns={left:[],normal:[],right:[]},Nui.each(e.columns,function(e,i){'left'===e.fixed||!0===e.fixed?t._columns.left.push(e):'right'===e.fixed&&t._columns.right.push(e),t._columns.normal.push(e)}),t._create())},_create:function(){var t=this,e=t.options,i=t.constructor;t._rows={},t._cols={},t._rowNumber=i._getRowNumber(e.columns,0,[]),t._data=e.data,Nui.each(t._columns,function(e,i){t._setRowCol(e,i)}),t._hasLeftRight=this._cols.left.length||this._cols.right.length,t.element=$(t._tpl2html('layout',t._tplData({rows:t._rows,isFixed:e.isFixed,paging:e.paging}))).appendTo(t.target),t._theadHeight(),Nui.each(t._cols,function(i,a){t.element.find('.datagrid-table-'+a+' .datagrid-inner').html(t._tpl2html('tbody',{isFixed:e.isFixed,fields:i,list:t._data}))}),t._rowHeight(),t._resetHeight(),t._event()},_resetHeight:function(){var t=this;if(!0===t.options.isFixed){var e=t.target.innerHeight(),i=t.element.find('.datagrid-inner'),a=(t.element.find('.datagrid-tbody'),t.element.find('.datagrid-thead')),n=e-a.outerHeight()-t.element.find('.datagrid-paging').outerHeight();i.height(n);var l=i.width()-i.children().width();a.css({'padding-right':l})}},_theadHeight:function(){var t=this;if(t._hasLeftRight){var e=t.element.find('.datagrid-table-normal .table-thead');t.element.find('.datagrid-table-fixed .table-thead .table-cell').each(function(t){var i=$(this),a=i.attr('cellid'),n=e.find('.table-cell[cellid="'+a+'"]'),l=n.innerHeight();Nui.browser.msie&&(Nui.browser.version>8?l+=1:7==Nui.browser.version&&(l-=1)),i.height(l)})}},_rowHeight:function(){var t=this;if(t._hasLeftRight){var e=t.element.find('.datagrid-table-left .table-tbody .table-row'),i=t.element.find('.datagrid-table-right .table-tbody .table-row');t.element.find('.datagrid-table-normal .table-tbody .table-row').each(function(t){var a=$(this).outerHeight();e.eq(t).height(a),i.eq(t).height(a)})}},_setRowCol:function(t,e,i){var a=this,n=(a.options,a.constructor);void 0===i&&(i=0),a._rows[e]||(a._rows[e]=[]),a._cols[e]||(a._cols[e]=[]),t.length&&!a._rows[e][i]&&(a._rows[e][i]=[]),Nui.each(t,function(t){var l=n._hasChildren(t),d={};l&&(d.colspan=n._colspan(t.children),a._setRowCol(t.children,e,i+1)),Nui.each(t,function(t,e){'children'!==e&&'function'!=typeof t&&(d[e]=t)}),l||(d.rowspan=a._rowNumber-i,a._cols[e].push(t)),a._rows[e][i].push(d)})},_events:{'click .table-tbody .table-row':'_active _getRowData _rowclick'},_active:function(t,e){var i=this;!0===i.options.isActive&&(i.element.find('.datagrid-tbody .table-row').eq(e.index()).addClass('s-crt').siblings().removeClass('s-crt'),Nui.each(i.__instances,function(t){t!==i&&!0===t.options.isActive&&t.element.find('.datagrid-tbody table-row.s-crt').removeClass('s-crt')}),t.stopPropagation())},_getRowData:function(t,e){return this._data[e.data('rowIndex')]},_rowclick:function(t,e,i){var a=this.options.onRowClick;'function'==typeof a&&a.call(this,t,e,i)}})}),Nui.define('./script/demo',function(require,imports,renders,extend){require('src/components/datagrid')({target:'#data',data:[{id:'11111111',prov:'安徽',city:'蚌埠',address:'安徽蚌',job:'php工程师',name:'阿牛'},{id:'22222222',prov:'浙江',city:'杭州',address:'浙江杭州',job:'前端工程师',name:'尹加增'},{id:'22222222',prov:'浙江',city:'杭州',address:'浙江杭州',job:'前端工程师',name:'尹加增'},{id:'22222222',prov:'浙江',city:'杭州',address:'浙江杭州',job:'前端工程师',name:'尹加增'},{id:'22222222',prov:'浙江',city:'杭州',address:'浙江杭州',job:'前端工程师',name:'尹加增'},{id:'22222222',prov:'浙江',city:'杭州',address:'浙江杭州',job:'前端工程师',name:'尹加增'},{id:'22222222',prov:'浙江',city:'杭州',address:'浙江杭州',job:'前端工程师',name:'尹加增'},{id:'22222222',prov:'浙江',city:'杭州',address:'浙江杭州',job:'前端工程师',name:'尹加增'},{id:'22222222',prov:'浙江',city:'杭州',address:'浙江杭州',job:'前端工程师',name:'尹加增'},{id:'22222222',prov:'浙江',city:'杭州',address:'浙江杭州',job:'前端工程师',name:'尹加增'},{id:'22222222',prov:'浙江',city:'杭州',address:'浙江杭州',job:'前端工程师',name:'尹加增'}],columns:[{title:'ID',field:'id',width:'20%'},{title:'期初余额',field:'address',width:'20%',children:[{title:'借方',width:'10%',field:'address'},{title:'借方',width:'10%',field:'address'}]},{title:'姓名',field:'name',width:'10%',nowrap:'nowrap'},{title:'职业',field:'job',width:'20%'}],onRowClick:function(t,e,i){console.log(i)}})});
//# sourceMappingURL=demo-min.js.map?v=7e86efb