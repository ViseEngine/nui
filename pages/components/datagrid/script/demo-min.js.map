{"version":3,"sources":["demo-debug.js"],"names":["Nui","define","component","this","extend","static","options","_init","_exec","module","require","self","doc","on","each","__instances","val","isActive","element","find","removeClass","_hasChildren","value","isArray","children","length","_getRowNumber","array","index","arr","id","parent","undefined","v","fixed","_colspan","count","data","columns","isFixed","isLine","isBorder","url","paging","onFilter","onClick","onFocusin","onFocusout","onFocus","onBlur","onRowClick","onRowDblclick","_template","layout","table","tbody","rows","head","foot","attr","opts","_getTarget","_columns","left","normal","right","k","push","_create","_class","constructor","_rows","_cols","_rowNumber","_data","_setRowCol","_hasLeftRight","$","_tpl2html","_tplData","appendTo","target","_theadHeight","html","fields","list","_rowHeight","_resetHeight","_event","conntailerHeight","innerHeight","inner","thead","height","outerHeight","width","css","padding-right","normalThead","i","item","cellid","elem","browser","msie","version","LeftRow","RightRow","eq","type","row","hasChild","colspan","key","rowspan","_events","click .table-tbody .table-row","_active","e","addClass","siblings","stopPropagation","_getRowData","_rowclick","rowClick","call","imports","renders","prov","city","address","job","name","title","field","nowrap","console","log"],"mappings":"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","file":"demo-min.js.map?v=7e86efb","sourcesContent":["Nui.define('src/components/paging',['component'], function(component){\r\n    return this.extend(component, {\r\n        static:{\r\n            \r\n        },\r\n        options:{\r\n            \r\n        },\r\n        _init:function(){\r\n            this._exec()\r\n        },\r\n        _exec:function(){\r\n            \r\n        }\r\n    })\r\n})\nNui.define('src/components/datagrid',['component'], function(component){\r\n    var module = this;\r\n    var paging = module.require('src/components/paging');\r\n    return module.extend(component, {\r\n        static:{\r\n            _init:function(){\r\n                var self = this;\r\n                Nui.doc.on('click', function(){\r\n                    Nui.each(self.__instances, function(val){\r\n                        if(val.options.isActive === true){\r\n                            val.element.find('.datagrid-tbody table-row.s-crt').removeClass('s-crt');\r\n                        }\r\n                    })\r\n                })\r\n            },\r\n            _hasChildren:function(value){\r\n                return Nui.isArray(value.children) && value.children.length\r\n            },\r\n            //获取表格标题行数\r\n            _getRowNumber:function(array, index, arr, id, parent){\r\n                var self = this;\r\n                if(!arr[index]){\r\n                    arr[index] = true;\r\n                }\r\n\r\n                if(id === undefined){\r\n                    id = 0;\r\n                }\r\n                \r\n                Nui.each(array, function(v){\r\n                    v['cellid'] = id++;\r\n\r\n                    if(parent && parent.fixed){\r\n                        v.fixed = parent.fixed\r\n                    }\r\n\r\n                    if(self._hasChildren(v)){\r\n                        id = self._getRowNumber(v.children, index+1, arr, id, v)\r\n                    }\r\n                })\r\n\r\n                if(parent){\r\n                    return id\r\n                }\r\n\r\n                return arr.length\r\n            },\r\n            //获取合并单元格数\r\n            _colspan:function(array, count){\r\n                var self = this;\r\n                if(count === undefined){\r\n                    count = 0\r\n                }\r\n                Nui.each(array, function(v){\r\n                    if(self._hasChildren(v)){\r\n                        count += self._colspan(v.children, count)\r\n                    }\r\n                    else{\r\n                        count += 1\r\n                    }\r\n                })\r\n                return count\r\n            }\r\n        },\r\n        options:{\r\n            data:null,\r\n            columns:null,\r\n            isFixed:true,\r\n            isLine:false,\r\n            isActive:true,\r\n            isBorder:true,\r\n            url:null,\r\n            paging:null,\r\n\r\n            onFilter:null,\r\n            onClick:null,\r\n            onFocusin:null,\r\n            onFocusout:null,\r\n            onFocus:null,\r\n            onBlur:null,\r\n\r\n            onRowClick:null,\r\n            onRowDblclick:null\r\n        },\r\n        _template:{\r\n            layout:\r\n                '<div class=\"<% className %>\">'+\r\n                    '<div class=\"datagrid-body\">'+\r\n                        '<div class=\"datagrid-main\">'+\r\n                            '<%include \"table\"%>'+\r\n                        '</div>'+\r\n                        '<%if paging%>'+\r\n                        '<div class=\"datagrid-paging\"></div>'+\r\n                        '<%/if%>'+\r\n                    '</div>'+\r\n                '</div>',\r\n            table:\r\n                '<%each rows v k%>'+\r\n                    '<%if v.length%>'+\r\n                    '<div class=\"datagrid-table<%if k === \"left\" || k === \"right\"%> datagrid-table-fixed<%/if%> datagrid-table-<%k%>\">'+\r\n                        '<div class=\"datagrid-thead\">'+\r\n                            '<table class=\"ui-table\">'+\r\n                                '<thead class=\"table-thead\">'+\r\n                                    '<%each v%>'+\r\n                                    '<tr class=\"table-row\">'+\r\n                                        '<%each $value val%>'+\r\n                                        '<th class=\"table-cell\"<%include \"attr\"%>>'+\r\n                                            '<span class=\"cell-text\"><%val.title%></span>'+\r\n                                        '</th>'+\r\n                                        '<%/each%>'+\r\n                                    '</tr>'+\r\n                                    '<%/each%>'+\r\n                                '</thead>'+\r\n                                '<%if isFixed !== true%>'+\r\n                                '<tbody class=\"table-tbody datagrid-inner\"></tbody>'+\r\n                                '<%/if%>'+\r\n                            '</table>'+\r\n                        '</div>'+\r\n                        '<%if isFixed === true%>'+\r\n                        '<div class=\"datagrid-inner\"></div>'+\r\n                        '<%/if%>'+\r\n                    '</div>'+\r\n                    '<%/if%>'+\r\n                '<%/each%>',\r\n            tbody:\r\n                '<%if isFixed === true%>'+\r\n                '<div class=\"datagrid-tbody\">'+\r\n                    '<table class=\"ui-table\">'+\r\n                        '<tbody class=\"table-tbody\">'+\r\n                        '<%include \"rows\"%>'+\r\n                        '</tbody>'+\r\n                    '</table>'+\r\n                '</div>'+\r\n                '<%else%>'+\r\n                '<%include \"rows\"%>'+\r\n                '<%/if%>',\r\n            rows:\r\n                '<%if list && list.length%>'+\r\n                '<%each list%>'+\r\n                '<tr class=\"table-row\" data-row-index=\"<%$index%>\">'+\r\n                    '<%each fields val key%>'+\r\n                    '<%each $value v k%>'+\r\n                    '<%if val.field === k%>'+\r\n                    '<td class=\"table-cell\"<%include \"attr\"%>>'+\r\n                        '<span class=\"cell-text\"><%v%></div>'+\r\n                    '</td>'+\r\n                    '<%return false%>'+\r\n                    '<%/if%>'+\r\n                    '<%/each%>'+\r\n                    '<%/each%>'+\r\n                '</tr>'+\r\n                '<%/each%>'+\r\n                '<%else%>'+\r\n                '<tr>'+\r\n                    '<td class=\"table-cell\">'+\r\n                        \r\n                    '</td>'+\r\n                '</tr>'+\r\n                '<%/if%>',\r\n            head:'',\r\n            foot:'',\r\n            attr:\r\n                '<%each val value name%>'+\r\n                '<%if \"width field align valign nowrap colspan rowspan cellid\".indexOf(name) !== -1%>'+\r\n                ' <%name%>=\"<%value%>\"'+\r\n                '<%/if%>'+\r\n                '<%/each%>'\r\n        },\r\n        _init:function(){\r\n            this._exec()\r\n        },\r\n        _exec:function(){\r\n            var self = this, opts = self.options;\r\n            if(self._getTarget() && Nui.isArray(opts.columns) && opts.columns.length){\r\n                self._columns = {\r\n                    left:[],\r\n                    normal:[],\r\n                    right:[]\r\n                }\r\n                Nui.each(opts.columns, function(v, k){\r\n                    if(v.fixed === 'left' || v.fixed === true){\r\n                        self._columns.left.push(v)\r\n                    }\r\n                    else if(v.fixed === 'right'){\r\n                        self._columns.right.push(v)\r\n                    }\r\n                    self._columns.normal.push(v)\r\n                })\r\n                self._create()\r\n            }\r\n        },\r\n        _create:function(){\r\n            var self = this, opts = self.options, _class = self.constructor;\r\n            self._rows = {};\r\n            self._cols = {};\r\n            self._rowNumber = _class._getRowNumber(opts.columns, 0, []);\r\n\r\n            self._data = opts.data;\r\n\r\n            Nui.each(self._columns, function(v, k){\r\n                self._setRowCol(v, k)\r\n            })\r\n\r\n            self._hasLeftRight = this._cols.left.length || this._cols.right.length;\r\n\r\n            self.element = $(self._tpl2html('layout', self._tplData({\r\n                rows:self._rows,\r\n                isFixed:opts.isFixed,\r\n                paging:opts.paging\r\n            }))).appendTo(self.target);\r\n\r\n            self._theadHeight();\r\n\r\n            Nui.each(self._cols, function(v, k){\r\n                self.element.find('.datagrid-table-'+k+' .datagrid-inner').html(self._tpl2html('tbody', {\r\n                    isFixed:opts.isFixed,\r\n                    fields:v,\r\n                    list:self._data\r\n                }))\r\n            })\r\n\r\n            self._rowHeight();\r\n            self._resetHeight();\r\n            self._event()\r\n        },\r\n        _resetHeight:function(){\r\n            var self = this, opts = self.options;\r\n            if(opts.isFixed === true){\r\n                var conntailerHeight = self.target.innerHeight();\r\n                var inner = self.element.find('.datagrid-inner');\r\n                var tbody = self.element.find('.datagrid-tbody');\r\n                var thead = self.element.find('.datagrid-thead');\r\n                var height = conntailerHeight - thead.outerHeight() - self.element.find('.datagrid-paging').outerHeight();\r\n                inner.height(height);\r\n                var width = inner.width() - inner.children().width();\r\n                thead.css({'padding-right':width})\r\n            }\r\n        },\r\n        _theadHeight:function(){\r\n            var self = this;\r\n            if(self._hasLeftRight){\r\n                var normalThead = self.element.find('.datagrid-table-normal .table-thead')\r\n\r\n                self.element.find('.datagrid-table-fixed .table-thead .table-cell').each(function(i){\r\n                    var item = $(this), cellid = item.attr('cellid');\r\n                    var elem = normalThead.find('.table-cell[cellid=\"'+ cellid +'\"]');\r\n                    var height = elem.innerHeight();\r\n                    if(Nui.browser.msie){\r\n                        if(Nui.browser.version > 8){\r\n                            height += 1\r\n                        }\r\n                        else if(Nui.browser.version == 7){\r\n                            height -= 1\r\n                        }\r\n                    }\r\n                    item.height(height)\r\n                })\r\n            }\r\n        },\r\n        _rowHeight:function(){\r\n            var self = this;\r\n            if(self._hasLeftRight){\r\n                var LeftRow = self.element.find('.datagrid-table-left .table-tbody .table-row');\r\n                var RightRow = self.element.find('.datagrid-table-right .table-tbody .table-row');\r\n\r\n                self.element.find('.datagrid-table-normal .table-tbody .table-row').each(function(i){\r\n                    var height = $(this).outerHeight();\r\n                    LeftRow.eq(i).height(height);\r\n                    RightRow.eq(i).height(height);\r\n                })\r\n            }\r\n        },\r\n        _setRowCol:function(array, type, row){\r\n            var self = this, opts = self.options, _class = self.constructor;\r\n            if(row === undefined){\r\n                row = 0;\r\n            }\r\n\r\n            if(!self._rows[type]){\r\n                self._rows[type] = []\r\n            }\r\n\r\n            if(!self._cols[type]){\r\n                self._cols[type] = []\r\n            }\r\n\r\n            if(array.length && !self._rows[type][row]){\r\n                self._rows[type][row] = []\r\n            }\r\n\r\n            Nui.each(array, function(v){\r\n                var hasChild = _class._hasChildren(v);\r\n                var data = {};\r\n\r\n                if(hasChild){\r\n                    data.colspan = _class._colspan(v.children);\r\n                    self._setRowCol(v.children, type, row + 1)\r\n                }\r\n\r\n                Nui.each(v, function(val, key){\r\n                    if(key !== 'children' && typeof val !== 'function'){\r\n                        data[key] = val\r\n                    }\r\n                })\r\n\r\n                if(!hasChild){\r\n                    data.rowspan = self._rowNumber - row;\r\n                    self._cols[type].push(v)\r\n                }\r\n\r\n                self._rows[type][row].push(data)\r\n            })\r\n        },\r\n        _events:{\r\n            'click .table-tbody .table-row':'_active _getRowData _rowclick'\r\n        },\r\n        _active:function(e, elem){\r\n            var self = this;\r\n            if(self.options.isActive === true){\r\n                self.element.find('.datagrid-tbody .table-row').eq(elem.index()).addClass('s-crt').siblings().removeClass('s-crt');\r\n                Nui.each(self.__instances, function(val){\r\n                    if(val !== self && val.options.isActive === true){\r\n                        val.element.find('.datagrid-tbody table-row.s-crt').removeClass('s-crt');\r\n                    }\r\n                })\r\n                e.stopPropagation();\r\n            }\r\n        },\r\n        _getRowData:function(e, elem){\r\n            return this._data[elem.data('rowIndex')];\r\n        },\r\n        _rowclick:function(e, elem, data){\r\n            var rowClick = this.options.onRowClick;\r\n            if(typeof rowClick === 'function'){\r\n                rowClick.call(this, e, elem, data)\r\n            }\r\n        }\r\n    })\r\n})\nNui.define('./script/demo',function(require,imports,renders,extend){\n\tvar module=this;\n\tvar datagrid = require('src/components/datagrid');\r\n\t\r\n\tdatagrid({\r\n\t    target:'#data',\r\n\t    //isFixed:false,\r\n\t    data:[{\r\n\t        id:'11111111',\r\n\t        prov:'安徽', \r\n\t        city:'蚌埠',\r\n\t        address:'安徽蚌',\r\n\t        job:'php工程师',\r\n\t        name:'阿牛'\r\n\t    }, {\r\n\t        id:'22222222',\r\n\t        prov:'浙江',\r\n\t        city:'杭州',\r\n\t        address:'浙江杭州',\r\n\t        job:'前端工程师',\r\n\t        name:'尹加增'\r\n\t    }, {\r\n\t        id:'22222222',\r\n\t        prov:'浙江',\r\n\t        city:'杭州',\r\n\t        address:'浙江杭州',\r\n\t        job:'前端工程师',\r\n\t        name:'尹加增'\r\n\t    }, {\r\n\t        id:'22222222',\r\n\t        prov:'浙江',\r\n\t        city:'杭州',\r\n\t        address:'浙江杭州',\r\n\t        job:'前端工程师',\r\n\t        name:'尹加增'\r\n\t    }, {\r\n\t        id:'22222222',\r\n\t        prov:'浙江',\r\n\t        city:'杭州',\r\n\t        address:'浙江杭州',\r\n\t        job:'前端工程师',\r\n\t        name:'尹加增'\r\n\t    }, {\r\n\t        id:'22222222',\r\n\t        prov:'浙江',\r\n\t        city:'杭州',\r\n\t        address:'浙江杭州',\r\n\t        job:'前端工程师',\r\n\t        name:'尹加增'\r\n\t    }, {\r\n\t        id:'22222222',\r\n\t        prov:'浙江',\r\n\t        city:'杭州',\r\n\t        address:'浙江杭州',\r\n\t        job:'前端工程师',\r\n\t        name:'尹加增'\r\n\t    }, {\r\n\t        id:'22222222',\r\n\t        prov:'浙江',\r\n\t        city:'杭州',\r\n\t        address:'浙江杭州',\r\n\t        job:'前端工程师',\r\n\t        name:'尹加增'\r\n\t    }, {\r\n\t        id:'22222222',\r\n\t        prov:'浙江',\r\n\t        city:'杭州',\r\n\t        address:'浙江杭州',\r\n\t        job:'前端工程师',\r\n\t        name:'尹加增'\r\n\t    }, {\r\n\t        id:'22222222',\r\n\t        prov:'浙江',\r\n\t        city:'杭州',\r\n\t        address:'浙江杭州',\r\n\t        job:'前端工程师',\r\n\t        name:'尹加增'\r\n\t    }, {\r\n\t        id:'22222222',\r\n\t        prov:'浙江',\r\n\t        city:'杭州',\r\n\t        address:'浙江杭州',\r\n\t        job:'前端工程师',\r\n\t        name:'尹加增'\r\n\t    }],\r\n\t    columns:[{\r\n\t        title:'ID',\r\n\t        field:'id',\r\n\t        width:'20%'\r\n\t    }, {\r\n\t        title:'期初余额',\r\n\t        field:'address',\r\n\t        width:'20%',\r\n\t        children:[{\r\n\t            title:'借方',\r\n\t            width:'10%',\r\n\t            field:'address'\r\n\t        }, {\r\n\t            title:'借方',\r\n\t            width:'10%',\r\n\t            field:'address'\r\n\t        }]\r\n\t    }, {\r\n\t        title:'姓名',\r\n\t        field:'name',\r\n\t        width:'10%',\r\n\t        nowrap:'nowrap'\r\n\t    }, {\r\n\t        title:'职业',\r\n\t        field:'job',\r\n\t        width:'20%'\r\n\t    }],\r\n\t    onRowClick:function(e, elem, data){\r\n\t        console.log(data)\r\n\t    }\r\n\t})\n});\n"]}