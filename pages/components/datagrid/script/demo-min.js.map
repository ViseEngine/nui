{"version":3,"sources":["demo-debug.js"],"names":["Nui","define","component","this","extend","static","options","_init","_exec","module","require","_hasChildren","value","isArray","children","length","_getRowNumber","array","index","arr","self","each","v","_colspan","count","undefined","data","columns","_template","layout","head","foot","body","opts","target","_getTarget","_class","constructor","_rows","_cols","_rowNumber","_setRowCol","element","$","_tpl2html","rows","appendTo","row","hasChild","colspan","val","key","rowspan","push","imports","renders","id","prov","city","job","name","title","field"],"mappings":"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","file":"demo-min.js.map?v=6bdfdd9","sourcesContent":["Nui.define('src/components/paging',['component'], function(component){\r\n    return this.extend(component, {\r\n        static:{\r\n            \r\n        },\r\n        options:{\r\n            \r\n        },\r\n        _init:function(){\r\n            this._exec()\r\n        },\r\n        _exec:function(){\r\n            \r\n        }\r\n    })\r\n})\nNui.define('src/components/datagrid',['component'], function(component){\r\n    var module = this;\r\n    var paging = module.require('src/components/paging');\r\n    return module.extend(component, {\r\n        static:{\r\n            _init:function(){\r\n\r\n            },\r\n            _hasChildren:function(value){\r\n                return Nui.isArray(value.children) && value.children.length\r\n            },\r\n            //获取表格标题行数\r\n            _getRowNumber:function(array, index, arr){\r\n                var self = this;\r\n                if(!arr[index]){\r\n                    arr[index] = true;\r\n                }\r\n                Nui.each(array, function(v){\r\n                    if(self._hasChildren(v)){\r\n                        self._getRowNumber(v.children, index+1, arr)\r\n                    }\r\n                })\r\n                return arr.length\r\n            },\r\n            //获取合并单元格数\r\n            _colspan:function(array, count){\r\n                var self = this;\r\n                if(count === undefined){\r\n                    count = 0\r\n                }\r\n                Nui.each(array, function(v){\r\n                    if(self._hasChildren(v)){\r\n                        count += self._colspan(v.children, count)\r\n                    }\r\n                    else{\r\n                        count += 1\r\n                    }\r\n                })\r\n                return count\r\n            }\r\n        },\r\n        options:{\r\n            data:null,\r\n            columns:null\r\n        },\r\n        _template:{\r\n            layout:'<div class=\"nui-datagrid\">'+\r\n                    '<div class=\"datagrid-body\">'+\r\n                        '<div class=\"datagrid-main\">'+\r\n                            '<div class=\"datagrid-table\">'+\r\n                                '<div class=\"datagrid-thead\">'+\r\n                                    '<table class=\"ui-table\">'+\r\n                                        '<tbody class=\"table-tbody\">'+\r\n                                            '<%each rows%>'+\r\n                                            '<tr class=\"table-row\">'+\r\n                                                '<%each $value val%>'+\r\n                                                '<th class=\"table-cell\" rowspan=\"<%val.rowspan??%>\" colspan=\"<%val.colspan??%>\">'+\r\n                                                    '<span class=\"cell-text\"><%val.title%></span>'+\r\n                                                '</th>'+\r\n                                                '<%/each%>'+\r\n                                            '</tr>'+\r\n                                            '<%/each%>'+\r\n                                        '</tbody>'+\r\n                                    '</table>'+\r\n                                '</div>'+\r\n                                '<div class=\"datagrid-inner\"></div>'+\r\n                            '</div>'+\r\n                        '</div>'+\r\n                        '<div class=\"nui-paging\"></div>'+\r\n                    '</div>'+\r\n                '</div>',\r\n            head:'',\r\n            foot:'',\r\n            body:'<div class=\"datagrid-tbody\">'+\r\n                    '<table class=\"ui-table\">'+\r\n                        '<tbody class=\"table-tbody\">'+\r\n                            '<tr class=\"table-row\">'+\r\n                                '<td class=\"table-cell\">'+\r\n                                    '<span class=\"cell-text\">1</div>'+\r\n                                '</td>'+\r\n                            '</tr>'+\r\n                        '</tbody>'+\r\n                    '</table>'+\r\n                '</div>'+\r\n                '<div class=\"datagrid-tfoot\">'+\r\n                    '<table class=\"ui-table\">'+\r\n                        '<tbody class=\"table-tbody\">'+\r\n                            '<tr class=\"table-row\">'+\r\n                                '<td class=\"table-cell\">'+\r\n                                    '<span class=\"cell-text\">1</div>'+\r\n                                '</td>'+\r\n                            '</tr>'+\r\n                        '</tbody>'+\r\n                    '</table>'+\r\n                '</div>'\r\n        },\r\n        _init:function(){\r\n            this._exec()\r\n        },\r\n        _exec:function(){\r\n            var self = this, opts = self.options, target = self._getTarget(), _class = self.constructor;\r\n            if(target && Nui.isArray(opts.columns) && opts.columns.length){\r\n                self._rows = [];\r\n                self._cols = [];\r\n                self._rowNumber = _class._getRowNumber(opts.columns, 0, []);\r\n                self._setRowCol(opts.columns);\r\n                self.element = $(self._tpl2html('layout', {\r\n                    rows:self._rows\r\n                })).appendTo(target)\r\n            }\r\n        },\r\n        _setRowCol:function(array, row){\r\n            var self = this, opts = self.options, _class = self.constructor;\r\n            if(row === undefined){\r\n                row = 0;\r\n            }\r\n            if(!self._rows[row]){\r\n                self._rows[row] = [];\r\n            }\r\n            Nui.each(array, function(v){\r\n                var hasChild = _class._hasChildren(v);\r\n                var data = {};\r\n\r\n                if(hasChild){\r\n                    data.colspan = _class._colspan(v.children);\r\n                    self._setRowCol(v.children, row + 1)\r\n                }\r\n\r\n                Nui.each(v, function(val, key){\r\n                    if(key !== 'children' && typeof val !== 'function'){\r\n                        data[key] = val;\r\n                    }\r\n                })\r\n\r\n                if(!hasChild){\r\n                    data.rowspan = self._rowNumber - row;\r\n                    self._cols.push(v)\r\n                }\r\n\r\n                self._rows[row].push(data);\r\n            })\r\n        }\r\n    })\r\n})\nNui.define('./script/demo',function(require,imports,renders,extend){\n\tvar module=this;\n\tvar datagrid = require('src/components/datagrid');\r\n\t\r\n\tdatagrid({\r\n\t    target:'#data',\r\n\t    data:[{\r\n\t        id:'11111111',\r\n\t        prov:'安徽',\r\n\t        city:'蚌埠',\r\n\t        job:'php工程师',\r\n\t        name:'阿牛'\r\n\t    }, {\r\n\t        id:'22222222',\r\n\t        prov:'浙江',\r\n\t        city:'杭州',\r\n\t        job:'前端工程师',\r\n\t        name:'尹加增'\r\n\t    }],\r\n\t    columns:[{\r\n\t        title:'ID',\r\n\t        children:[{\r\n\t            title:'id1',\r\n\t            field:'id',\r\n\t            children:[{\r\n\t                title:'id11',\r\n\t                field:'id',\r\n\t                children:[{\r\n\t                    title:'id12',\r\n\t                field:'id',\r\n\t                }]\r\n\t            }, {\r\n\t                title:'id12',\r\n\t                field:'id',\r\n\t            }]\r\n\t        }, {\r\n\t            title:'id2',\r\n\t            field:'id'\r\n\t        }]\r\n\t    }, {\r\n\t        title:'姓名',\r\n\t        field:'name'\r\n\t    }, {\r\n\t        title:'地址',\r\n\t        children:[{\r\n\t            title:'省份',\r\n\t            field:'prov'\r\n\t        }, {\r\n\t            title:'城市',\r\n\t            field:'city'\r\n\t        }]\r\n\t    }, {\r\n\t        title:'职业',\r\n\t        field:'job'\r\n\t    }]\r\n\t})\n});\n"]}