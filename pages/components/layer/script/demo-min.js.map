{"version":3,"sources":["demo-debug.js"],"names":["Nui","define","component","this","extend","options","text","animate","equal","color","_template","list","wrap","elem","_init","_exec","that","target","_getTarget","deftext","attr","trim","undefined","val","_create","opts","self","constructor","document","createElement","_setStyle","removeAttr","data","_tplData","style","position","display","width","outerWidth","overflow","cursor","_tpl2html","element","$","height","outerHeight","isText","is","left","_getSize","top","line-height","insertAfter","_events","className","__id","addClass","_createStyle","_createRules","head","appendChild","sheet","id","deleteRule","e","each","v","selector","rules","addRule","insertRule","pleft","_on","focus","stop","opacity","value","hide","show","_reset","_off","remove","unwrap","removeClass","arguments","length","util","statics","_maskzIndex","_zIndex","timer","win","on","clearTimeout","setTimeout","__instances","isCenter","resize","$fn","$ready","init","content","maxWidth","maxHeight","edge","container","title","isMove","isMask","isInnerMove","isClickMask","isMoveMask","isHide","isFull","isTop","isTips","isFixed","scrollbar","align","bubble","enable","dir","iframe","cache","src","close","confirm","name","callback","cancel","under","button","onMove","onResize","onScroll","onBeforeDestroy","static","layout","mask","movemask","_container","_jquery","_containerDOM","get","tagName","_window","_isWindow","pos","css","_isFixed","bsie6","buttons","_createButton","isTitle","_getContent","z-index","_setTop","appendTo","_box","children","_head","_body","_main","_foot","_iframe","_iframeOnload","_bindMove","_bindTop","_button","_buttonEvent","_bindScroll","_show","_createIframe","jQuery","prop","setParam","Date","getTime","frameborder","scroll","load","_iframeDocument","contents","_resize","defaults","caches","btn","push","unshift","slice","hasClass","isCall","call","destroy","_setzIndex","x","y","_x","_y","ele","_moveMask","skin","pageX","pageY","stopPropagation","doc","offsetTop","scrollTop","offsetLeft","scrollLeft","_isTop","_setLower","unders","concat","obj","k","_position","_v","_pos","right","bottom","test","Function","parseFloat","type","wWidth","wHeight","sleft","_setSize","edgeSize","ws","layer","find","_height","_showMask","__layermask__","_timer","onInit","noMask","exports","_delete","_isdestroy","onDestroy","module","alert","tips","isClose","loading","message","form","validator","valid","btns","i","main","submit","formLayer","elems","messages","setting","rule","eval","key","msg","messageFilter","errorClass","onkeyup","focusInvalid","onfocusout","focusCleanup","ignore","success","error","errorPlacement","closest","itemWrap","errorWrap","html","submitHandler","param","ajax","getData","serialize","serializeArray","join","onBeforeSubmit","url","dataType","res","xhr","onSuccess","onError","validate","require","imports","renders","lay","append","click"],"mappings":"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","file":"demo-min.js.map?v=d843786","sourcesContent":["/**\r\n * @author Aniu[2016-11-10 22:39]\r\n * @update Aniu[2016-11-10 22:39]\r\n * @version 1.0.1\r\n * @description 输入框占位符\r\n */\r\n\r\nNui.define('src/components/placeholder',['component'], function(component){\r\n    return this.extend(component, {\r\n        options:{\r\n            /**\r\n             * @func 输入框占位提示文本，若元素上含有placeholder属性将会覆盖该值\r\n             * @type <String>\r\n             */\r\n            text:'',\r\n            /**\r\n             * @func 是否启用动画显示展示\r\n             * @type <Boolean>\r\n             */\r\n            animate:false,\r\n            /**\r\n             * @func 输入框值是否可以和占位符相同\r\n             * @type <Boolean>\r\n             */\r\n            equal:false,\r\n            /**\r\n             * @func 占位符文本颜色\r\n             * @type <String>\r\n             */\r\n            color:'#ccc'\r\n        },\r\n        _template:{\r\n            list:'<%each style%><%$index%>:<%$value%>;<%/each%>',\r\n            wrap:'<strong class=\"<% className %>\" style=\"<%include \\'list\\'%>\" />',\r\n            elem:'<b style=\"<%include \\'list\\'%>\"><%text%></b>'\r\n        },\r\n        _init:function(){\r\n            this._exec();\r\n        },\r\n        _exec:function(){\r\n            var that = this, target = that._getTarget();\r\n            if(target){\r\n                var text = that.deftext = target.attr('placeholder');\r\n                if(!that.deftext && that.options.text){\r\n                    target.attr('placeholder', text = that.options.text)\r\n                }\r\n                that.text = Nui.trim(text);\r\n                if(that.val === undefined){\r\n                    that.val = Nui.trim(target.val());\r\n                }\r\n                if(that.text){\r\n                    that._create()\r\n                }\r\n            }\r\n        },\r\n        _create:function(){\r\n            var that = this, opts = that.options, self = that.constructor;\r\n            if(opts.animate || (!opts.animate && !('placeholder' in document.createElement('input')))){\r\n                if(opts.animate){\r\n                    that.target.removeAttr('placeholder')\r\n                }\r\n                var data = that._tplData();\r\n                data.style = {\r\n                    'position':'relative',\r\n                    'display':'inline-block',\r\n                    'width':that.target.outerWidth()+'px',\r\n                    'overflow':'hidden',\r\n                    'cursor':'text'\r\n                }\r\n                that.target.wrap(that._tpl2html('wrap', data))\r\n                that.element = $(that._tpl2html('elem', {\r\n                        text:that.text,\r\n                        style:(function(){\r\n                            var height = that.target.outerHeight();\r\n                            var isText = that.target.is('textarea');\r\n                            return ({\r\n                                'display':Nui.trim(that.target.val()) ? 'none' : 'inline',\r\n                                'position':'absolute',\r\n                                'left':self._getSize(that.target, 'l', 'padding')+self._getSize(that.target, 'l')+'px',\r\n                                'top':self._getSize(that.target, 't', 'padding')+self._getSize(that.target, 't')+'px',\r\n                                'height':isText ? 'auto' : height+'px',\r\n                                'line-height':isText ? 'normal' : height+'px',\r\n                                'color':opts.color\r\n                            })\r\n                        })()\r\n                    })).insertAfter(that.target)\r\n\r\n                that._events()\r\n            }\r\n            else{\r\n                that._setStyle()\r\n            }\r\n        },\r\n        _setStyle:function(){\r\n            var that = this, opts = that.options;\r\n            that.className = '_placeholder-'+that.__id;\r\n            that.target.addClass(that.className);\r\n            if(!that.constructor.style){\r\n                that._createStyle()\r\n            }\r\n            that._createRules()\r\n        },\r\n        _createStyle:function(){\r\n            var that = this;\r\n            var style = document.createElement('style');\r\n            document.head.appendChild(style);\r\n            that.constructor.style = style.sheet\r\n        },\r\n        _createRules:function(){\r\n            var that = this;\r\n            var sheet = that.constructor.style;\r\n            var id = that.__id;\r\n            try{\r\n                sheet.deleteRule(id)\r\n            }\r\n            catch(e){}\r\n            Nui.each(['::-webkit-input-placeholder', ':-ms-input-placeholder', '::-moz-placeholder'], function(v){\r\n                var selector = '.'+that.className+v;\r\n                var rules = 'opacity:1; color:'+(that.options.color||'');\r\n                try{\r\n                    if('addRule' in sheet){\r\n                        sheet.addRule(selector, rules, id)\r\n                    }\r\n                    else if('insertRule' in sheet){\r\n                        sheet.insertRule(selector + '{' + rules + '}', id)\r\n                    }\r\n                }\r\n                catch(e){}\r\n            })\r\n        },\r\n        _events:function(){\r\n            var that = this, opts = that.options, self = that.constructor;\r\n            var pleft = self._getSize(that.target, 'l', 'padding') + self._getSize(that.target, 'l');\r\n            that._on('click', that.element, function(){\r\n                that.target.focus()\r\n            })\r\n\r\n            that._on('focus', that.target, function(){\r\n                opts.animate && that.element.stop(true, false).animate({left:pleft+10, opacity:'0.5'});\r\n            })\r\n\r\n            that._on('blur change', that.target, function(e, elem){\r\n                that.value();\r\n            })\r\n\r\n            that._on('keyup keydown', that.target, function(e, elem){\r\n                Nui.trim(elem.val()) ? that.element.hide() : that.element.show()\r\n            })\r\n        },\r\n        _reset:function(){\r\n            var that = this;\r\n            that._off();\r\n            if(that.element){\r\n                that.element.remove();\r\n                that.target.unwrap();\r\n            }\r\n            that.target.val(that.val).removeClass(that.className);\r\n            if(that.deftext){\r\n                that.target.attr('placeholder', that.deftext)\r\n            }\r\n            else{\r\n                that.target.removeAttr('placeholder')\r\n            }\r\n        },\r\n        value:function(val){\r\n            var self = this.constructor, target = this.target;\r\n            var pleft = self._getSize(target, 'l', 'padding') + self._getSize(target, 'l');\r\n            var v = Nui.trim(!arguments.length ? target.val() : target.val(val).val());\r\n            if((!this.options.equal && v === this.text) || !v){\r\n                target.val('');\r\n                this.element && this.element.show();\r\n                if(this.options.animate){\r\n                    this.element.stop(true, false).animate({left:pleft, opacity:'1'})\r\n                }\r\n            }\r\n            else if(this.element){\r\n                this.element.hide()\r\n            }\r\n        }\r\n    })\r\n})\r\n\n/**\r\n * @author Aniu[2016-11-10 22:39]\r\n * @update Aniu[2016-11-10 22:39]\r\n * @version 1.0.1\r\n * @description layer弹出层\r\n */\r\n\r\nNui.define('src/components/layer/layer',['component', 'util'], function(component, util){\r\n    var module = this;\r\n\r\n    var statics = {\r\n        _maskzIndex:10000,\r\n        _zIndex:10000,\r\n        _init:function(){\r\n            var self = this;\r\n            var timer = null;\r\n            Nui.win.on('resize', function(){\r\n                clearTimeout(timer);\r\n                timer = setTimeout(function(){\r\n                    Nui.each(self.__instances, function(val){\r\n                        var opts = val.options;\r\n                        if(opts.position || opts.isCenter === true){\r\n                            val.resize()\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n        },\r\n        $fn:null,\r\n        $ready:null,\r\n        init:null\r\n    }\r\n\r\n    var options = {\r\n        //主体内容\r\n        content:'',\r\n        //高度\r\n        width:320,\r\n        //宽度\r\n        height:'auto',\r\n        //最大宽度\r\n        maxWidth:0,\r\n        //最大高度\r\n        maxHeight:0,\r\n        //定时器，N毫秒后自动关闭\r\n        timer:0,\r\n        //弹窗四周距离窗口边缘距离\r\n        edge:0,\r\n        //弹窗容器\r\n        container:'body',\r\n        //弹窗标题\r\n        title:'温馨提示',\r\n        //是否可以拖动\r\n        isMove:false,\r\n        //是否有遮罩\r\n        isMask:true,\r\n        //是否只能在窗口内拖动\r\n        isInnerMove:false,\r\n        //点击遮罩是否关闭弹窗\r\n        isClickMask:false,\r\n        //是否使用遮罩拖动\r\n        isMoveMask:false,\r\n        //是否能用hide方法关闭遮罩\r\n        isHide:true,\r\n        //弹窗是否浏览器改变大小时显示在窗口中央\r\n        isCenter:true,\r\n        //是否全屏显示\r\n        isFull:false,\r\n        //是否在点击弹窗时将其置顶\r\n        isTop:false,\r\n        //是否以提示框展示，没有标题，按钮\r\n        isTips:false,\r\n        //是否拖动滚动条固定位置\r\n        isFixed:true,\r\n        //当内容超过弹出层容器，是否显示滚动条\r\n        scrollbar:true,\r\n        //按钮对齐方式\r\n        align:'center',\r\n        //是否以气泡形式展示，弹出层边缘会多出箭头\r\n        bubble:{\r\n            enable:false,\r\n            dir:'top'\r\n        },\r\n        //弹出层内容展示iframe，不建议跨域使用\r\n        iframe:{\r\n            enable:false,\r\n            cache:false,\r\n            src:''\r\n        },\r\n        //关闭按钮\r\n        close:{\r\n            enable:true,\r\n            text:'×'\r\n        },\r\n        //确定按钮\r\n        confirm:{\r\n            enable:false,\r\n            name:'normal',\r\n            text:'确定',\r\n            callback:function(){\r\n                return true\r\n            }\r\n        },\r\n        //取消按钮\r\n        cancel:{\r\n            enable:true,\r\n            text:'取消'\r\n        },\r\n        /*弹出层定位 top/left/right/bottom\r\n        position:{\r\n            top:10,\r\n            left:10\r\n        }\r\n        */\r\n        position:null,\r\n        /*将弹出层置于遮罩层底部\r\n        under:[layer1, layer2]\r\n        */\r\n        under:null,\r\n        /*配置按钮，若id为confirm/cancel/close将会覆盖内置按钮参数\r\n        button:[{\r\n            id:'confirm',\r\n            text:'确定',\r\n            name:'normal',\r\n            callback:function(){\r\n\r\n            }\r\n        }]\r\n        */\r\n        button:null,\r\n        //onInit：弹出层显示时回调\r\n        //onDestroy：弹出层注销时回调\r\n        //当拖动弹出层移动后回调\r\n        onMove:null,\r\n        //窗口改变大小位置时回调\r\n        onResize:null,\r\n        //容器滚动时回调\r\n        onScroll:null,\r\n        //弹窗销毁前回调，若返回false则不能销毁\r\n        onBeforeDestroy:null\r\n    }\r\n\r\n    return this.extend(component, {\r\n        static:statics,\r\n        options:options,\r\n        _template:{\r\n            layout:\r\n                '<div class=\"<% className %>\" style=\"<% include \\'style\\' %>\">'+\r\n                    '<div class=\"layer-box\">'+\r\n                        '<%if close%>'+\r\n                            '<% var btn = close %>'+\r\n                            '<% include \"button\" %>'+\r\n                        '<%/if%>'+\r\n                        '<%if bubble%>'+\r\n                        '<span class=\"layer-bubble layer-bubble-<%bubble%>\"><b></b><i></i></span>'+\r\n                        '<%/if%>'+\r\n                        '<%if title%>'+\r\n                        '<div class=\"layer-head\">'+\r\n                            '<span class=\"layer-title\"><%title%></span>'+\r\n                        '</div>'+\r\n                        '<%/if%>'+\r\n                        '<div class=\"layer-body\">'+\r\n                            '<div class=\"layer-main\">'+\r\n                            '<%content%>'+\r\n                            '</div>'+\r\n                        '</div>'+\r\n                        '<%if button && button.length%>'+\r\n                        '<div class=\"layer-foot\" style=\"text-align:<%align%>\">'+\r\n                        '<div class=\"layer-inner\">'+\r\n                        '<%each button btn%>'+\r\n                            '<%include \"button\"%>'+\r\n                        '<%/each%>'+\r\n                        '</div>'+\r\n                        '</div>'+\r\n                        '<%/if%>'+\r\n                    '</div>'+\r\n                '</div>',\r\n            button:\r\n                '<button class=\"ui-button'+\r\n                    '<%if btn.name%>'+\r\n                    '<%each [].concat(btn.name) name%> ui-button-<%name%><%/each%>'+\r\n                    '<%/if%> layer-button-<%btn.id%>\"'+\r\n                    '<%if btn.style%>'+\r\n                    ' style=\"<%each btn.style v n%><%n%>:<%v%>;<%/each%>\"'+\r\n                    '<%/if%>><%btn.text || \"按钮\"%></button>',\r\n            iframe:\r\n                '<iframe<%each attr%> <%$index%>=\"<%$value%>\"<%/each%>></iframe>',\r\n            mask:\r\n                '<div class=\"nui-layer-mask'+\r\n                    '<%if skin%> nui-layer-mask-<%skin%><%/if%>\" style=\"<%include \\'style\\'%>\">'+\r\n                    '<div class=\"layer-mask\"></div>'+\r\n                '</div>',\r\n            movemask:\r\n                '<div class=\"nui-layer-movemask'+\r\n                    '<%if skin%> nui-layer-movemask-<%skin%><%/if%>\" style=\"<%include \\'style\\'%>\">'+\r\n                '</div>',\r\n            style:\r\n                '<%each style%><%$index%>:<%$value%>;<%/each%>'\r\n        },\r\n        /*\r\n        top:弹窗距离窗口顶部距离\r\n        left:弹窗距离窗口左边距离\r\n        width:弹窗宽度\r\n        height:弹窗高度\r\n        */\r\n        data:{},\r\n        _init:function(){\r\n            this._zIndex = ++this.constructor._zIndex;\r\n            this._exec()\r\n        },\r\n        _exec:function(){\r\n            var that = this, opts = that.options, self = that.constructor;\r\n            that._container = self._jquery(opts.container);\r\n            if(that._container.length){\r\n                that._containerDOM = that._container.get(0);\r\n                if(that._containerDOM.tagName !== 'BODY'){\r\n                    that._window = that._container;\r\n                    that._isWindow = false;\r\n                    var pos = that._container.css('position');\r\n                    if(pos !== 'absolute' && pos !== 'relative'){\r\n                        that._container.css('position', 'relative')\r\n                    }\r\n                }\r\n                else{\r\n                    that._window = Nui.win;\r\n                    that._isWindow = true;\r\n                }\r\n                that._isFixed = opts.isFixed && !Nui.bsie6 && that._isWindow;\r\n                that._create();\r\n            }\r\n        },\r\n        _create:function(){\r\n            var that = this, opts = that.options;\r\n            var buttons = that._createButton(), isTitle = false;\r\n            if(opts.isTips !== true){\r\n                isTitle = typeof opts.title === 'string';\r\n            }\r\n            var data = that._tplData({\r\n                content:that._getContent(),\r\n                close:buttons.close,\r\n                button:buttons.button,\r\n                title:isTitle ? (opts.title||'温馨提示') : null,\r\n                bubble:opts.bubble.enable === true ? opts.bubble.dir : null,\r\n                align:opts.align || 'center',\r\n                style:{\r\n                    'z-index':that._zIndex,\r\n                    'position':'absolute',\r\n                    'display':'block'\r\n                }\r\n            });\r\n            if(that._isFixed){\r\n                data.style.position = 'fixed';\r\n            }\r\n            that._setTop();\r\n            that.element = $(that._tpl2html('layout', data)).appendTo(that._container);\r\n            that._box = that.element.children('.layer-box');\r\n\t\t\tthat._head = that._box.children('.layer-head');\r\n\t\t\tthat._body = that._box.children('.layer-body');\r\n\t\t\tthat._main = that._body.children('.layer-main');\r\n\t\t\tthat._foot = that._box.children('.layer-foot');\r\n            if(opts.isTips !== true){\r\n                if(opts.iframe.enable === true){\r\n                    that._iframe = that._main.children('iframe');\r\n                    that._iframeOnload()\r\n                }\r\n                if(opts.isMove === true && isTitle){\r\n                    that._bindMove();\r\n                }\r\n                if(opts.isTop === true){\r\n                    that._bindTop();\r\n                }\r\n            }\r\n            if(that._button.length){\r\n                that._buttonEvent();\r\n            }\r\n            if(opts.isFixed === true && !that._isFixed === true){\r\n                that._bindScroll()\r\n            }\r\n            that._show()\r\n        },\r\n        _getContent:function(){\r\n            var that = this, opts = that.options, content = '';\r\n            if(opts.isTips !== true && opts.iframe.enable === true){\r\n                content = that._createIframe();\r\n            }\r\n            else{\r\n                if(typeof opts.content === 'string'){\r\n                    content = opts.content\r\n                }\r\n                else if(opts.content instanceof jQuery){\r\n                    content = opts.content.prop('outerHTML')\r\n                }\r\n            }\r\n            return content\r\n        },\r\n        _createIframe:function(){\r\n            var that = this, opts = that.options, name = 'layer-iframe'+that.__id, src = opts.iframe.src;\r\n            if(options.iframe.cache === false){\r\n                src = util.setParam('_', new Date().getTime(), src)\r\n            }\r\n            return that._tpl2html('iframe', {\r\n                attr:{\r\n                    frameborder:'0',\r\n                    name:name,\r\n                    id:name,\r\n                    src:src,\r\n                    scroll:'hidden',\r\n                    style:'width:100%;'\r\n                }\r\n            })\r\n        },\r\n        _iframeOnload:function(){\r\n            var that = this;\r\n            that._iframe.load(function(){\r\n                that._iframeDocument = that._iframe.contents();\r\n                that._resize()\r\n            })\r\n        },\r\n        _createButton:function(){\r\n            var that = this, opts = that.options, defaults = {}, buttons = {}, caches = {};\r\n            that._button = [];\r\n            if(opts.isTips !== true){\r\n                Nui.each(['confirm', 'cancel'], function(id){\r\n                    var btn = opts[id];\r\n                    if(btn && btn.enable === true){\r\n                        defaults[id] = {\r\n                            id:id,\r\n                            name:btn.name,\r\n                            style:btn.style,\r\n                            text:btn.text,\r\n                            callback:btn.callback\r\n                        }\r\n                    }\r\n                });\r\n                if(opts.button && opts.button.length){\r\n                    Nui.each(opts.button, function(val){\r\n                        var id = val.id;\r\n                        if(!caches[id]){\r\n                            caches[id] = true;\r\n                            if(defaults[id]){\r\n                                if(!val.text){\r\n                                    if(id === 'cancel'){\r\n                                        val.text = '取消'\r\n                                    }\r\n                                    else if(id === 'confirm'){\r\n                                        val.text = '确定'\r\n                                    }\r\n                                }\r\n                                delete defaults[id]\r\n                            }\r\n                            that._button[id === 'close' ? 'unshift' : 'push'](val)\r\n                        }\r\n                    })\r\n                }\r\n                Nui.each(defaults, function(val){\r\n                    that._button.push(val)\r\n                });\r\n            }\r\n            if(!caches.close && opts.close && opts.close.enable === true){\r\n                that._button.unshift({\r\n                    id:'close',\r\n                    name:opts.close.name,\r\n                    style:opts.close.style,\r\n                    text:opts.close.text,\r\n                    callback:opts.close.callback\r\n                })\r\n            }\r\n            if(that._button[0] && that._button[0].id === 'close'){\r\n                buttons.close = that._button[0],\r\n                buttons.button = that._button.slice(1);\r\n            }\r\n            else{\r\n                buttons.button = that._button\r\n            }\r\n            return buttons\r\n        },\r\n        _buttonEvent:function(){\r\n            var that = this;\r\n            Nui.each(that._button, function(val){\r\n                that._on('click', that.element, '.layer-button-'+val.id, function(e, elem){\r\n                    if(!elem.hasClass('nui-button-disabled')){\r\n                        var id = val.id, callback = val.callback;\r\n                        var isCall = typeof callback === 'function' ? callback.call(that, that._main, that.__id, elem) : null;\r\n                        if((id === 'confirm' && isCall === true) || (id !== 'confirm' && isCall !== false)){\r\n                            that.destroy()\r\n                        }\r\n                    }\r\n                })\r\n            })\r\n        },\r\n        _bindTop:function(){\r\n            var that = this;\r\n            that._on('click', that.element, function(){\r\n                that._setzIndex();\r\n            });\r\n        },\r\n        _bindMove:function(){\r\n            var that = this, opts = that.options, element = that.element;\r\n            var self = that.constructor, elem = element, isMove = false, x, y, _x, _y;\r\n            that._on('mousedown', that._head, function(e, ele){\r\n                isMove = true;\r\n                that._setzIndex();\r\n                if(opts.isMoveMask === true){\r\n                    elem = that._moveMask = $(that._tpl2html('movemask', {\r\n                        skin:opts.skin,\r\n                        style:{\r\n                            'z-index':that._zIndex+1,\r\n                            'cursor':'move',\r\n                            'position':that._isFixed ? 'fixed' : 'absolute'\r\n                        }\r\n                    })).appendTo(that._container);\r\n                    elem.css({\r\n                        width:that.data.outerWidth - self._getSize(elem, 'lr', 'all'),\r\n                        height:that.data.outerHeight - self._getSize(elem, 'tb', 'all'),\r\n                        top:that.data.top,\r\n                        left:that.data.left\r\n                    });\r\n                }\r\n                ele.css('cursor','move');\r\n                x = e.pageX - that.data.left;\r\n                y = e.pageY - that.data.top;\r\n                e.stopPropagation();\r\n            });\r\n            that._on('mousemove', Nui.doc, function(e){\r\n                var width = that._container.outerWidth(), height = that._container.outerHeight();\r\n                if(isMove){\r\n                    _x = e.pageX - x;\r\n                    _y = e.pageY - y;\r\n                    _x < 0 && (_x = 0);\r\n                    _y < 0 && (_y = 0);\r\n                    if(opts.isInnerMove === true){\r\n                        _x + that.data.outerWidth > width && (_x = width - that.data.outerWidth);\r\n                        _y + that.data.outerHeight > height && (_y = height - that.data.outerHeight);\r\n                    }\r\n                    that.data.top = _y;\r\n                    that.data.left = _x;\r\n                    elem.css({top:_y, left:_x});\r\n                    return !isMove;\r\n                }\r\n            });\r\n            that._on('mouseup', Nui.doc, function(e){\r\n                if(isMove){\r\n                    isMove = false;\r\n                    that._head.css('cursor','default');\r\n                    if(opts.isMoveMask === true){\r\n                        element.css(that.data);\r\n                        that._moveMask.remove();\r\n                        that._moveMask = null;\r\n                    }\r\n                    if(typeof opts.onMove === 'function'){\r\n                        opts.onMove.call(that, that._main, that.__id)\r\n                    }\r\n                    that.data.offsetTop = that.data.top - that._window.scrollTop();\r\n                    that.data.offsetLeft = that.data.left - that._window.scrollLeft();\r\n                }\r\n            });\r\n        },\r\n        _bindScroll:function(){\r\n            var that = this, opts = that.options;\r\n            that._on('scroll', that._window, function(){\r\n                var top = that.data.offsetTop + that._window.scrollTop();\r\n                var left = that.data.offsetLeft + that._window.scrollLeft();\r\n                that.data.top = top;\r\n                that.data.left = left;\r\n                that.element.css(that.data);\r\n                if(typeof opts.onScroll === 'function'){\r\n                    opts.onScroll.call(that, that._main, that.__id)\r\n                }\r\n            })\r\n        },\r\n        //鼠标点击弹出层将弹出层层级设置最大\r\n        _setzIndex:function(){\r\n            var that = this, self = that.constructor;\r\n            if(that._isTop && that.element){\r\n                that._isTop = false;\r\n                that._zIndex = ++self._zIndex;\r\n                that.element.css('zIndex', that._zIndex);\r\n                that._setTop();\r\n            }\r\n        },\r\n        _setLower:function(destroy){\r\n            var that = this, self = that.constructor, opts = that.options, unders = [];\r\n            if(opts.under){\r\n                unders = unders.concat(opts.under);\r\n                if(unders.length){\r\n                    Nui.each(unders, function(obj, k){\r\n                        if(obj && obj.element){\r\n                            obj.element.css('z-index', destroy ? obj._zIndex : self._maskzIndex-1)\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        },\r\n        _setTop:function(){\r\n            var that = this, self = that.constructor;\r\n            Nui.each(self.__instances, function(val){\r\n                if(val && val !== that && val.options.isTop === true){\r\n                    val._isTop = true;\r\n                }\r\n            });\r\n        },\r\n        _position:function(){\r\n            var that = this, data = that.data, pos = that.options.position;\r\n            var _pos = {\r\n                top:pos.top,\r\n                left:pos.left,\r\n                right:pos.right,\r\n                bottom:pos.bottom\r\n            }, _v;\r\n\r\n            if(_pos.top !== undefined && _pos.bottom !== undefined){\r\n                delete _pos.bottom\r\n            }\r\n\r\n            if(_pos.left !== undefined && _pos.right !== undefined){\r\n                delete _pos.right\r\n            }\r\n\r\n            Nui.each(_pos, function(v, k){\r\n                if(v === undefined){\r\n                    delete _pos[k];\r\n                    return true;\r\n                }\r\n                _v = v;\r\n                if(typeof v === 'string'){\r\n                    if(!v){\r\n                        _v = 0\r\n                    }\r\n                    else{\r\n                        if(k === 'top' || k === 'bottom'){\r\n                            if(v === 'self'){\r\n                                _v = data.outerHeight\r\n                            }\r\n                            else if(/[\\+\\-\\*\\/]/.test(v)){\r\n                                _v = (new Function('var self = '+data.outerHeight+'; return '+v))()\r\n                            }\r\n                        }\r\n                        else{\r\n                            if(v === 'self'){\r\n                                _v = data.outerWidth\r\n                            }\r\n                            else if(/[\\+\\-\\*\\/]/.test(v)){\r\n                                _v = (new Function('var self = '+data.outerWidth+'; return '+v))()\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                _pos[k] = _v === 'auto' ? 'auto' : parseFloat(_v)+'px'\r\n            })\r\n\r\n            return _pos\r\n        },\r\n        _resize:function(type){\r\n            var that = this, self = that.constructor, opts = that.options, element = that.element;\r\n            var wWidth = that._window.outerWidth();\r\n            var wHeight = that._window.outerHeight();\r\n            var stop = 0;\r\n            var sleft = 0;\r\n            if(!that._isFixed){\r\n                sleft = that._window.scrollLeft();\r\n                stop = that._window.scrollTop();\r\n            }\r\n            that._setSize();\r\n            if(opts.position){\r\n                var pos = element.css(that._position()).position();\r\n                if(Nui.bsie6){\r\n                    sleft = 0;\r\n                    stop = 0;\r\n                }\r\n                that.data.left = pos.left + sleft;\r\n                that.data.top = pos.top + stop;\r\n            }\r\n            else{\r\n                if(type === 'init' || opts.isCenter === true){\r\n                    var left = (wWidth - that.data.outerWidth) / 2 + sleft;\r\n                    var top = (wHeight - that.data.outerHeight) / 2 + stop;\r\n                    var edge = opts.edge > 0 ? opts.edge : 0;\r\n                    that.data.left = left > 0 ? left : edge;\r\n                    that.data.top = top > 0 ? top : edge;\r\n                }\r\n            }\r\n            that.data.offsetTop = that.data.top - that._window.scrollTop();\r\n            that.data.offsetLeft = that.data.left - that._window.scrollLeft();\r\n            element.css(that.data);\r\n        },\r\n        _setSize:function(){\r\n            var that = this, self = that.constructor, opts = that.options, element = that.element;\r\n            var edge = opts.edge > 0 ? opts.edge*2 : 0;\r\n            var wWidth = that._window.outerWidth() - edge;\r\n            var wHeight = that._window.outerHeight() - edge;\r\n\r\n            that._body.css({height:'auto', overflow:'visible'});\r\n            element.css({top:'auto', left:'auto', width:'auto', height:'auto'});\r\n            \r\n            var edgeSize = self._getSize(that._box, 'tb', 'all') +\r\n                that._head.outerHeight() + \r\n                self._getSize(that._head, 'tb', 'margin') + \r\n                self._getSize(that._body, 'tb', 'all') + \r\n                that._foot.outerHeight() + \r\n                self._getSize(that._foot, 'tb', 'margin');\r\n\r\n            var width = element.outerWidth();\r\n            if(opts.isFull !== true){\r\n                if(opts.width > 0){\r\n                    width = opts.width\r\n                }\r\n                else if(opts.width === '100%' || (opts.scrollbar === true && width > wWidth)){\r\n                    width = wWidth;\r\n                }\r\n                if(opts.maxWidth > 0 && width >= opts.maxWidth){\r\n                    width = opts.maxWidth\r\n                }\r\n            }\r\n            else{\r\n                width = wWidth;\r\n            }\r\n\r\n            var ws = 'nowrap';\r\n            if(opts.width > 0 || width == opts.maxWidth || width == wWidth){\r\n                ws = 'normal';\r\n            }\r\n\r\n            that.data.width = width - self._getSize(element, 'lr', 'all');\r\n            that._main.css('white-space', ws);\r\n            element.width(that.data.width);\r\n\r\n            var height = element.outerHeight();\r\n            if(that._iframeDocument){\r\n                that._iframeDocument[0].layer = that;\r\n                height = edgeSize + that._iframeDocument.find('body').outerHeight();\r\n            }\r\n\r\n            if(opts.isFull !== true){\r\n                if(opts.height > 0){\r\n                    height = opts.height\r\n                }\r\n                else if(opts.height === '100%' || ((opts.scrollbar === true || that._iframeDocument) && height > wHeight)){\r\n                    height = wHeight\r\n                }\r\n                if(opts.maxHeight > 0 && height >= opts.maxHeight){\r\n                    height = opts.maxHeight\r\n                }\r\n            }\r\n            else{\r\n                height = wHeight\r\n            }\r\n\r\n            that.data.outerWidth = width;\r\n            that.data.outerHeight = height;\r\n            that.data.height = height - self._getSize(element, 'tb', 'all');\r\n            element.height(that.data.height);\r\n            var _height = that.data.height - edgeSize;\r\n            if(that._main.outerHeight() > _height && !that._iframe && opts.scrollbar === true){\r\n                that._body.css('overflow', 'auto')\r\n            }\r\n            if(that._iframe){\r\n                that._iframe.height(_height);\r\n            }\r\n            that._body.height(_height)\r\n        },\r\n        _showMask:function(){\r\n            var that = this, self = that.constructor, opts = that.options;\r\n            if(!that._containerDOM.__layermask__){\r\n                that._containerDOM.__layermask__ = $(that._tpl2html('mask', {\r\n                    skin:opts.skin,\r\n                    style:{\r\n                        'z-index':self._maskzIndex,\r\n                        'position':that._isFixed ? 'fixed' : 'absolute',\r\n                        'top':'0px',\r\n                        'left':'0px',\r\n                        'width':'100%',\r\n                        'height':that._isFixed ? '100%' : that._container.outerHeight()+'px'\r\n                    }\r\n                })).appendTo(that._container);\r\n            }\r\n            if(opts.isClickMask === true){\r\n                that._on('click', that._containerDOM.__layermask__, function(){\r\n                    that.hide()\r\n                })\r\n            }\r\n        },\r\n        _show:function(){\r\n            var that = this, opts = that.options;\r\n            component('init', that._main);\r\n            that._resize('init');\r\n            that._setLower();\r\n            if(opts.isMask === true){\r\n                that._showMask()\r\n            }\r\n            if(opts.timer > 0){\r\n                that._timer = setTimeout(function(){\r\n                    that.hide();\r\n                }, opts.timer);\r\n            }\r\n            if(typeof opts.onInit === 'function'){\r\n                opts.onInit.call(this, that._main, that.__id)\r\n            }\r\n            return that\r\n        },\r\n        _reset:function(){\r\n            var that = this, self = that.constructor, noMask = true;\r\n            component.exports._reset.call(this);\r\n            component('destroy', that._main);\r\n            Nui.each(self.__instances, function(val){\r\n                if(val && val.options.isMask === true && val !== that && val._containerDOM === that._containerDOM){\r\n                    return (noMask = false);\r\n                }   \r\n            });\r\n            if(noMask && that._containerDOM.__layermask__){\r\n                that._containerDOM.__layermask__.remove();\r\n                that._containerDOM.__layermask__  = null;\r\n            }\r\n            if(that.options.timer > 0){\r\n                clearTimeout(that._timer);\r\n            }\r\n        },\r\n        resize:function(){\r\n            var that = this, opts = that.options, element = that.element;\r\n            that._resize();\r\n            if(typeof opts.onResize === 'function'){\r\n                opts.onResize.call(this, that._main, that.__id)\r\n            }\r\n            return that\r\n        },\r\n        hide:function(){\r\n            if(this.options.isHide === true){\r\n                this.destroy()\r\n            }\r\n        },\r\n        destroy:function(){\r\n            var that = this, self = that.constructor, opts = that.options;\r\n            if(typeof opts.onBeforeDestroy === 'function' && \r\n                opts.onBeforeDestroy.call(this, that._main, that.__id) === false){\r\n                return\r\n            }\r\n            that._delete();\r\n            that._reset();\r\n            that._setLower(true);\r\n            if(!that._isdestroy){\r\n                self._zIndex--;\r\n                that._isdestroy = true;\r\n            }\r\n            if(typeof opts.onDestroy === 'function'){\r\n                opts.onDestroy.call(this, that._main, that.__id)\r\n            }\r\n        }\r\n    })\r\n});\n/**\r\n * @author Aniu[2016-11-10 22:39]\r\n * @update Aniu[2016-11-10 22:39]\r\n * @version 1.0.1\r\n * @description layer扩展\r\n */\r\n\r\nNui.define('src/components/layer/layerExt',['src/components/layer/layer'], function(layer){\r\n    var module = this;\r\n\r\n    layer.alert = function(content, title, width, height){\r\n        var opts;\r\n        if(typeof content === 'object'){\r\n            opts = content;\r\n            content = opts.content;\r\n            delete opts.content;\r\n        }\r\n        return layer($.extend({\r\n            content:'<div style=\"padding:10px; line-height:20px;\">'+(content||'')+'</div>',\r\n            width:width,\r\n            height:height,\r\n            cancel:{\r\n                text:'关闭'\r\n            }\r\n        }, opts||{}))\r\n    }\r\n\r\n    layer.confirm = function(content, callback, title, width, height){\r\n        var opts;\r\n        if(typeof content === 'object'){\r\n            opts = content;\r\n            content = opts.content;\r\n            delete opts.content;\r\n        }\r\n        return layer($.extend(true, {\r\n            content:'<div style=\"padding:10px; line-height:20px;\">'+(content||'')+'</div>',\r\n            width:width,\r\n            height:height,\r\n            align:'right',\r\n            confirm:{\r\n                callback:callback||function(){\r\n                    return true\r\n                }\r\n            }\r\n        }, opts||{}, {\r\n            confirm:{\r\n                enable:true\r\n            }\r\n        }))\r\n    }\r\n\r\n    layer.iframe = function(src, title, width, height){\r\n        return layer({\r\n            iframe:{\r\n                enable:true,\r\n                src:src\r\n            },\r\n            width:width,\r\n            height:height,\r\n            cancel:{\r\n                text:'关闭'\r\n            }\r\n        })\r\n    }\r\n\r\n    layer.tips = function(content, dir, position, width, height){\r\n        var opts;\r\n        if(typeof content === 'object'){\r\n            opts = content;\r\n            content = opts.content;\r\n            delete opts.content;\r\n        }\r\n        return layer($.extend(true, {\r\n            content:content,\r\n            id:'tips',\r\n            width:width||'auto',\r\n            height:height||'auto',\r\n            position:position,\r\n            bubble:{\r\n                enable:true,\r\n                dir:dir||'top'\r\n            }\r\n        }, opts||{}, {\r\n            isTips:true,\r\n            isMask:false,\r\n            isClose:false,\r\n            close:{\r\n                enable:false\r\n            }\r\n        }))\r\n    }\r\n\r\n    layer.loading = function(content, width, height){\r\n        var opts;\r\n        if(typeof content === 'object'){\r\n            opts = content;\r\n            content = opts.content;\r\n            delete opts.content;\r\n        }\r\n        if(Nui.type(content, 'Number')){\r\n            height = width;\r\n            width = content;\r\n            content = '';\r\n        }\r\n        return layer($.extend({\r\n            content:'<div>'+(content||'正在加载数据...')+'</div>',\r\n            width:width||'auto',\r\n            height:height||'auto',\r\n        }, opts || {}, {\r\n            id:'loading',\r\n            isTips:true,\r\n            close:{\r\n                enable:false\r\n            }\r\n        }))\r\n    }\r\n\r\n    layer.message = function(type, content){\r\n        var opts, color = '#f00';\r\n        if(typeof type === 'object'){\r\n            opts = type;\r\n            content = opts.content;\r\n            delete opts.content;\r\n            type = 'success';\r\n        }\r\n\r\n        if(type !== 'success' && type !== 'error'){\r\n            content = type;\r\n            type = 'success';\r\n        }\r\n\r\n        if(type === 'success' && !content){\r\n            content = '操作成功'\r\n        }\r\n        else if(type === 'error' && !content){\r\n            content = '操作失败'\r\n        }\r\n\r\n        if(type === 'success'){\r\n            color = '#39B54A';\r\n        }\r\n\r\n        return layer($.extend({\r\n            content:'<div style=\"padding:10px; color:'+ color +';\">'+content+'</div>',\r\n            id:'message',\r\n            width:'auto',\r\n            height:'auto',\r\n            isTips:true,\r\n            timer:1500,\r\n            close:{\r\n                enable:true\r\n            }\r\n        }, opts || {}, {\r\n            isMask:false\r\n        }))\r\n    }\r\n\r\n    layer.form = function(options){\r\n        var onInit = options.onInit;\r\n        delete options.onInit;\r\n        var validator;\r\n        var valid = options.valid;\r\n        var btns = $.extend([], options.button || [{\r\n            id:'cancel',\r\n            text:'关闭'\r\n        }, {\r\n            id:'confirm',\r\n            name:'normal',\r\n            text:'保存'\r\n        }])\r\n\r\n        Nui.each(btns, function(val, i){\r\n            if(val.id === 'confirm' && !val.callback){\r\n                btns[i].callback = function(main){\r\n                    main.find('form').submit()\r\n                }\r\n                return false\r\n            }\r\n        })\r\n\r\n        delete options.button;\r\n        var formLayer = layer($.extend(true, {button:btns}, {\r\n            scrollbar:false,\r\n            id:'form',\r\n            onInit:function(main, id){\r\n                var that = this;\r\n                var elems = main.find('[name!=\"\"][data-rule]');\r\n                var form = main.find('form');\r\n                var rules = {};\r\n                var messages = {};\r\n                var setting = form.data('setting');\r\n                elems.each(function(){\r\n                    var elem = $(this);\r\n                    var name = elem.attr('name');\r\n                    var data = elem.data();\r\n                    var rule = eval('('+ data.rule +')');\r\n                    var message = eval('('+ data.message +')');\r\n                    rules[name] = rule;\r\n                    $.each(message, function(key, msg){\r\n                        if(typeof options.messageFilter === 'function'){\r\n                            message[key] = options.messageFilter(name, msg)||''\r\n                        }\r\n                        message[key] = '<b></b><s></s><i class=\"iconfont\">&#xe605;</i>' + message[key];\r\n                    })\r\n                    messages[name] = message;\r\n                });\r\n                var opts = {\r\n                    rules:rules,\r\n                    messages:messages,\r\n                    errorClass:'s-err',\r\n\t\t\t\t\tonkeyup:false,\r\n\t\t\t\t\tfocusInvalid:false,\r\n                    onfocusout:false,\r\n\t\t\t\t\tfocusCleanup:true,\r\n                    ignore:'',\r\n                    success:function(error, element) {\r\n\t\t\t\t\t\terror.remove();\r\n\t\t\t\t\t\t$(element).addClass('s-succ');\r\n\t\t\t\t\t},\r\n\t\t\t\t\terrorPlacement:function(error, element) {\r\n\t\t\t\t\t\telement.removeClass('s-succ');\r\n\t\t\t\t\t\tif(error.text()){\r\n\t\t\t\t\t\t\telement.closest(options.itemWrap||'.ui-item').find(options.errorWrap||'.ui-err').html(error);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n                    submitHandler:function(){\r\n                        var param = {};\r\n                        if(options.ajax && typeof options.ajax.getData === 'function'){\r\n                        \tparam = options.ajax.getData(form)\r\n                        }\r\n                        else{\r\n                        \tvar serialize = form.serializeArray();\r\n                        \t$.each(serialize, function(k, v){\r\n                                if(!param[v.name]){\r\n                                    param[v.name] = [];\r\n                                }\r\n                                param[v.name].push(v.value)\r\n                            })\r\n                            for(var i in param){\r\n                                param[i] = param[i].join(',')\r\n                            }\r\n                        }\r\n\r\n                        if(typeof options.onBeforeSubmit === 'function'){\r\n                        \tparam = options.onBeforeSubmit.call(that, main, id, param);\r\n                            if(param === false){\r\n                                return false\r\n                            }\r\n                        }\r\n\r\n                        var loading = layer.loading({\r\n                            content:options.loading||'正在保存数据...',\r\n                            under:that\r\n                        });\r\n                        \r\n                        $.ajax($.extend({\r\n                            url:form.attr('action'),\r\n                            dataType:'json',\r\n                            type:form.attr('method')||'POST',\r\n                            data:param,\r\n                            success:function(res, xhr){\r\n                                loading.hide();\r\n                                if(typeof options.onSuccess === 'function'){\r\n                                    options.onSuccess.call(that, main, id, res, xhr)\r\n                                }\r\n                            },\r\n                            error:function(xhr){\r\n                                loading.hide();\r\n                                if(typeof options.onError === 'function'){\r\n                                    options.onError.call(that, main, id, xhr)\r\n                                }\r\n                            }\r\n                        }, options.ajax||{}), null)\r\n                    }\r\n                }\r\n                validator = form.validate($.extend(true, opts, setting||{}, valid||{}))\r\n                typeof onInit === 'function' && onInit.call(that, main, id, validator)\r\n            }\r\n        }, options||{}))\r\n        formLayer.validator = validator;\r\n        return formLayer\r\n    }\r\n\r\n    return layer\r\n})\r\n\nNui.define('./script/demo',function(require,imports,renders,extend){\n\tvar module=this;\n\tvar layer = require('src/components/layer/layerExt');\r\n\tvar placeholder = require('src/components/placeholder');\r\n\t\r\n\t    \r\n\t\r\n\t    var lay = layer({\r\n\t        content:'<input type=\"text\" data-placeholder-options=\"{animate:true}\" placeholder=\"默认文本\"><a>aaa</a>',\r\n\t        width:300,\r\n\t        maxWidth:400,\r\n\t        id:'aaa',\r\n\t        skin:'aaa',\r\n\t        title:'',\r\n\t       //isFull:true,\r\n\t        //maxWidth:100,\r\n\t       // isFixed:false,\r\n\t        close:{\r\n\t            //enable:false\r\n\t        },\r\n\t        cancel:{\r\n\t            //enable:false\r\n\t        },\r\n\t        isCenter:true,\r\n\t        isMask:false,\r\n\t        isClickMask:true,\r\n\t        //maxHeight:300,\r\n\t        //edge:10,\r\n\t        //container:'#box',\r\n\t        isTop:true,\r\n\t        isMove:true,\r\n\t        //isMoveMask:true,\r\n\t        isInnerMove:true,\r\n\t        isHide:false,\r\n\t        timer:1000,\r\n\t        button:[{\r\n\t            id:'aaaaa',\r\n\t            text:'111' \r\n\t        }],\r\n\t        /*bubble:{\r\n\t            enable:true\r\n\t        },*/\r\n\t        /*iframe:{\r\n\t            enable:true,\r\n\t            src:'http://127.0.0.1/project/haoju/haoju2014/'\r\n\t        },*/\r\n\t        position:{\r\n\t            bottom:'self*-1+30',\r\n\t            right:0\r\n\t        },\r\n\t        scrollbar:true,\r\n\t        onInit:function(main){\r\n\t            //var lay = this;\r\n\t            \r\n\t            main.on('click', 'a', function(){\r\n\t                //lay.reset()\r\n\t                main.append('<p>aaaa</p><p>aaaa</p><p>aaaa</p><p>aaaa</p><p>aaaa</p><p>aaaa</p><p>aaaa</p>');\r\n\t                lay.resize()\r\n\t                /*layer({\r\n\t                    lower:lay,\r\n\t                    width:100\r\n\t                })*/\r\n\t               // lay.hide()\r\n\t            })\r\n\t        },\r\n\t        onBeforeDestroy:function(){\r\n\t            return false\r\n\t        }\r\n\t    })\r\n\t\r\n\t    /*layer.alert({\r\n\t        content:'1111',\r\n\t        under:lay\r\n\t    })*/\r\n\t    layer.message('')\r\n\t\r\n\t$('#btn').click(function(){\r\n\t    lay.element.animate({\r\n\t        top:lay.data.top - lay.data.outerHeight + 30,\r\n\t        //left:lay.data.left - lay.data.outerWidth,\r\n\t    })\r\n\t})\r\n\t\r\n\t$('#reset').click(function(){\r\n\t    layer('reset')\r\n\t})\r\n\t\r\n\t//a.destroy()\n});\n"]}