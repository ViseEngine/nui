{"version":3,"sources":["page-debug.js"],"names":["Nui","define","component","util","statics","_maskzIndex","_zIndex","_init","self","this","timer","win","on","clearTimeout","setTimeout","each","__instances","val","opts","options","position","isCenter","resize","$fn","$ready","init","content","width","height","maxWidth","maxHeight","edge","container","title","isMove","isMask","isInnerMove","isClickMask","isMoveMask","isHide","isFull","isTop","isTips","isFixed","scrollbar","align","bubble","enable","dir","iframe","cache","src","close","text","confirm","name","callback","cancel","under","button","onMove","onResize","onScroll","onBeforeDestroy","onTimer","extend","static","_template","layout","mask","movemask","style","data","constructor","_exec","that","_container","_jquery","length","_containerDOM","get","tagName","_window","_isWindow","pos","css","_isFixed","bsie6","_create","buttons","_createButton","isTitle","_tplData","_getContent","z-index","display","_setTop","element","$","_tpl2html","appendTo","box","children","head","body","main","foot","_iframe","_iframeOnload","_bindMove","_bindTop","_button","_buttonEvent","_bindScroll","_show","_createIframe","jQuery","prop","__id","setParam","Date","getTime","attr","frameborder","id","scroll","load","_iframeDocument","contents","_resize","defaults","caches","btn","push","unshift","slice","_on","e","elem","hasClass","isCall","call","destroy","_setzIndex","x","y","_x","_y","ele","_moveMask","skin","cursor","outerWidth","_getSize","outerHeight","top","left","pageX","pageY","stopPropagation","doc","remove","offsetTop","scrollTop","offsetLeft","scrollLeft","_isTop","_setLower","unders","concat","obj","k","_position","_v","_pos","right","bottom","undefined","v","test","Function","parseFloat","type","wWidth","wHeight","stop","sleft","_setSize","overflow","edgeSize","ws","layer","find","_height","_showMask","__layermask__","hide","_timer","onInit","_timerid","_reset","noMask","exports","_delete","_isdestroy","onDestroy","module","alert","tips","isClose","loading","message","color","form","validator","valid","btns","i","submit","formLayer","elems","rules","messages","setting","rule","eval","key","msg","messageFilter","errorClass","onkeyup","focusInvalid","onfocusout","focusCleanup","ignore","success","error","addClass","errorPlacement","removeClass","closest","itemWrap","errorWrap","html","submitHandler","param","ajax","getData","serialize","serializeArray","value","join","onBeforeSubmit","url","dataType","res","xhr","onSuccess","onError","validate","events","renders","document","mapping","click .j-demo","click .j-position","animate"],"mappings":"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","file":"page-min.js.map?v=1f33535","sourcesContent":["/**\r\n * @author Aniu[2016-11-10 22:39]\r\n * @update Aniu[2016-11-10 22:39]\r\n * @version 1.0.1\r\n * @description layer弹出层\r\n */\r\n\r\nNui.define('src/components/layer/layer',['component', 'util'], function(component, util){\r\n    var module = this;\r\n\r\n    var statics = {\r\n        _maskzIndex:10000,\r\n        _zIndex:10000,\r\n        _init:function(){\r\n            var self = this;\r\n            var timer = null;\r\n            Nui.win.on('resize', function(){\r\n                clearTimeout(timer);\r\n                timer = setTimeout(function(){\r\n                    Nui.each(self.__instances, function(val){\r\n                        var opts = val.options;\r\n                        if(opts.position || opts.isCenter === true){\r\n                            val.resize()\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n        },\r\n        $fn:null,\r\n        $ready:null,\r\n        init:null\r\n    }\r\n\r\n    var options = {\r\n        //主体内容\r\n        content:'',\r\n        //高度\r\n        width:320,\r\n        //宽度\r\n        height:'auto',\r\n        //最大宽度\r\n        maxWidth:0,\r\n        //最大高度\r\n        maxHeight:0,\r\n        //定时器，N毫秒后自动关闭\r\n        timer:0,\r\n        //弹窗四周距离窗口边缘距离\r\n        edge:0,\r\n        //弹窗容器\r\n        container:'body',\r\n        //弹窗标题\r\n        title:'温馨提示',\r\n        //是否可以拖动\r\n        isMove:false,\r\n        //是否有遮罩\r\n        isMask:true,\r\n        //是否只能在窗口内拖动\r\n        isInnerMove:false,\r\n        //点击遮罩是否关闭弹窗\r\n        isClickMask:false,\r\n        //是否使用遮罩拖动\r\n        isMoveMask:false,\r\n        //是否能用hide方法关闭遮罩\r\n        isHide:true,\r\n        //弹窗是否浏览器改变大小时显示在窗口中央\r\n        isCenter:true,\r\n        //是否全屏显示\r\n        isFull:false,\r\n        //是否在点击弹窗时将其置顶\r\n        isTop:false,\r\n        //是否以提示框展示，没有标题，按钮\r\n        isTips:false,\r\n        //是否拖动滚动条固定位置\r\n        isFixed:true,\r\n        //当内容超过弹出层容器，是否显示滚动条\r\n        scrollbar:true,\r\n        //按钮对齐方式\r\n        align:'center',\r\n        //是否以气泡形式展示，弹出层边缘会多出箭头\r\n        bubble:{\r\n            enable:false,\r\n            dir:'top'\r\n        },\r\n        //弹出层内容展示iframe，不建议跨域使用\r\n        iframe:{\r\n            enable:false,\r\n            cache:false,\r\n            src:''\r\n        },\r\n        //关闭按钮\r\n        close:{\r\n            enable:true,\r\n            text:'×'\r\n        },\r\n        //确定按钮\r\n        confirm:{\r\n            enable:false,\r\n            name:'normal',\r\n            text:'确定',\r\n            callback:function(){\r\n                return true\r\n            }\r\n        },\r\n        //取消按钮\r\n        cancel:{\r\n            enable:true,\r\n            text:'取消'\r\n        },\r\n        /*弹出层定位 top/left/right/bottom\r\n        position:{\r\n            top:10,\r\n            left:10\r\n        }\r\n        */\r\n        position:null,\r\n        /*将弹出层置于遮罩层底部\r\n        under:[layer1, layer2]\r\n        */\r\n        under:null,\r\n        /*配置按钮，若id为confirm/cancel/close将会覆盖内置按钮参数\r\n        button:[{\r\n            id:'confirm',\r\n            text:'确定',\r\n            name:'normal',\r\n            callback:function(){\r\n\r\n            }\r\n        }]\r\n        */\r\n        button:null,\r\n        //onInit：弹出层显示时回调\r\n        //onDestroy：弹出层注销时回调\r\n        //当拖动弹出层移动后回调\r\n        onMove:null,\r\n        //窗口改变大小位置时回调\r\n        onResize:null,\r\n        //容器滚动时回调\r\n        onScroll:null,\r\n        //弹窗销毁前回调，若返回false则不能销毁\r\n        onBeforeDestroy:null,\r\n        //定时关闭弹窗回调\r\n        onTimer:null\r\n    }\r\n\r\n    return this.extend(component, {\r\n        static:statics,\r\n        options:options,\r\n        _template:{\r\n            layout:\r\n                '<div class=\"<% className %>\" style=\"<% include \\'style\\' %>\">'+\r\n                    '<div class=\"layer-box\">'+\r\n                        '<%if close%>'+\r\n                            '<% var btn = close %>'+\r\n                            '<% include \"button\" %>'+\r\n                        '<%/if%>'+\r\n                        '<%if bubble%>'+\r\n                        '<span class=\"layer-bubble layer-bubble-<%bubble%>\"><b></b><i></i></span>'+\r\n                        '<%/if%>'+\r\n                        '<%if title%>'+\r\n                        '<div class=\"layer-head\">'+\r\n                            '<span class=\"layer-title\"><%title%></span>'+\r\n                        '</div>'+\r\n                        '<%/if%>'+\r\n                        '<div class=\"layer-body\">'+\r\n                            '<div class=\"layer-main\">'+\r\n                            '<%content%>'+\r\n                            '</div>'+\r\n                        '</div>'+\r\n                        '<%if button && button.length%>'+\r\n                        '<div class=\"layer-foot\" style=\"text-align:<%align%>\">'+\r\n                        '<div class=\"layer-inner\">'+\r\n                        '<%each button btn%>'+\r\n                            '<%include \"button\"%>'+\r\n                        '<%/each%>'+\r\n                        '</div>'+\r\n                        '</div>'+\r\n                        '<%/if%>'+\r\n                    '</div>'+\r\n                '</div>',\r\n            button:\r\n                '<button class=\"ui-button'+\r\n                    '<%if btn.name%>'+\r\n                    '<%each [].concat(btn.name) name%> ui-button-<%name%><%/each%>'+\r\n                    '<%/if%> layer-button-<%btn.id%>\"'+\r\n                    '<%if btn.style%>'+\r\n                    ' style=\"<%each btn.style v n%><%n%>:<%v%>;<%/each%>\"'+\r\n                    '<%/if%>><%btn.text || \"按钮\"%></button>',\r\n            iframe:\r\n                '<iframe<%each attr%> <%$index%>=\"<%$value%>\"<%/each%>></iframe>',\r\n            mask:\r\n                '<div class=\"nui-layer-mask'+\r\n                    '<%if skin%> nui-layer-mask-<%skin%><%/if%>\" style=\"<%include \\'style\\'%>\">'+\r\n                    '<div class=\"layer-mask\"></div>'+\r\n                '</div>',\r\n            movemask:\r\n                '<div class=\"nui-layer-movemask'+\r\n                    '<%if skin%> nui-layer-movemask-<%skin%><%/if%>\" style=\"<%include \\'style\\'%>\">'+\r\n                '</div>',\r\n            style:\r\n                '<%each style%><%$index%>:<%$value%>;<%/each%>'\r\n        },\r\n        /*\r\n        top:弹窗距离窗口顶部距离\r\n        left:弹窗距离窗口左边距离\r\n        width:弹窗宽度\r\n        height:弹窗高度\r\n        */\r\n        data:{},\r\n        _init:function(){\r\n            this._zIndex = ++this.constructor._zIndex;\r\n            this._exec()\r\n        },\r\n        _exec:function(){\r\n            var that = this, opts = that.options, self = that.constructor;\r\n            that._container = self._jquery(opts.container);\r\n            if(that._container.length){\r\n                that._containerDOM = that._container.get(0);\r\n                if(that._containerDOM.tagName !== 'BODY'){\r\n                    that._window = that._container;\r\n                    that._isWindow = false;\r\n                    var pos = that._container.css('position');\r\n                    if(pos !== 'absolute' && pos !== 'relative'){\r\n                        that._container.css('position', 'relative')\r\n                    }\r\n                }\r\n                else{\r\n                    that._window = Nui.win;\r\n                    that._isWindow = true;\r\n                }\r\n                that._isFixed = opts.isFixed && !Nui.bsie6 && that._isWindow;\r\n                that._create();\r\n            }\r\n        },\r\n        _create:function(){\r\n            var that = this, opts = that.options;\r\n            var buttons = that._createButton(), isTitle = false;\r\n            if(opts.isTips !== true){\r\n                isTitle = typeof opts.title === 'string';\r\n            }\r\n            var data = that._tplData({\r\n                content:that._getContent(),\r\n                close:buttons.close,\r\n                button:buttons.button,\r\n                title:isTitle ? (opts.title||'温馨提示') : null,\r\n                bubble:opts.bubble.enable === true ? opts.bubble.dir : null,\r\n                align:opts.align || 'center',\r\n                style:{\r\n                    'z-index':that._zIndex,\r\n                    'position':'absolute',\r\n                    'display':'block'\r\n                }\r\n            });\r\n            if(that._isFixed){\r\n                data.style.position = 'fixed';\r\n            }\r\n            that._setTop();\r\n            that.element = $(that._tpl2html('layout', data)).appendTo(that._container);\r\n            that.box = that.element.children('.layer-box');\r\n\t\t\tthat.head = that.box.children('.layer-head');\r\n\t\t\tthat.body = that.box.children('.layer-body');\r\n\t\t\tthat.main = that.body.children('.layer-main');\r\n\t\t\tthat.foot = that.box.children('.layer-foot');\r\n            if(opts.isTips !== true){\r\n                if(opts.iframe.enable === true){\r\n                    that._iframe = that.main.children('iframe');\r\n                    that._iframeOnload()\r\n                }\r\n                if(opts.isMove === true && isTitle){\r\n                    that._bindMove();\r\n                }\r\n                if(opts.isTop === true){\r\n                    that._bindTop();\r\n                }\r\n            }\r\n            if(that._button.length){\r\n                that._buttonEvent();\r\n            }\r\n            if(opts.isFixed === true && !that._isFixed === true){\r\n                that._bindScroll()\r\n            }\r\n            that._show()\r\n        },\r\n        _getContent:function(){\r\n            var that = this, opts = that.options, content = '';\r\n            if(opts.isTips !== true && opts.iframe.enable === true){\r\n                content = that._createIframe();\r\n            }\r\n            else{\r\n                if(typeof opts.content === 'string'){\r\n                    content = opts.content\r\n                }\r\n                else if(opts.content instanceof jQuery){\r\n                    content = opts.content.prop('outerHTML')\r\n                }\r\n            }\r\n            return content\r\n        },\r\n        _createIframe:function(){\r\n            var that = this, opts = that.options, name = 'layer-iframe'+that.__id, src = opts.iframe.src;\r\n            if(options.iframe.cache === false){\r\n                src = util.setParam('_', new Date().getTime(), src)\r\n            }\r\n            return that._tpl2html('iframe', {\r\n                attr:{\r\n                    frameborder:'0',\r\n                    name:name,\r\n                    id:name,\r\n                    src:src,\r\n                    scroll:'hidden',\r\n                    style:'width:100%;'\r\n                }\r\n            })\r\n        },\r\n        _iframeOnload:function(){\r\n            var that = this;\r\n            that._iframe.load(function(){\r\n                that._iframeDocument = that._iframe.contents();\r\n                that._resize()\r\n            })\r\n        },\r\n        _createButton:function(){\r\n            var that = this, opts = that.options, defaults = {}, buttons = {}, caches = {};\r\n            that._button = [];\r\n            if(opts.isTips !== true){\r\n                Nui.each(['confirm', 'cancel'], function(id){\r\n                    var btn = opts[id];\r\n                    if(btn && btn.enable === true){\r\n                        defaults[id] = {\r\n                            id:id,\r\n                            name:btn.name,\r\n                            style:btn.style,\r\n                            text:btn.text,\r\n                            callback:btn.callback\r\n                        }\r\n                    }\r\n                });\r\n                if(opts.button && opts.button.length){\r\n                    Nui.each(opts.button, function(val){\r\n                        var id = val.id;\r\n                        if(!caches[id]){\r\n                            caches[id] = true;\r\n                            if(defaults[id]){\r\n                                if(!val.text){\r\n                                    if(id === 'cancel'){\r\n                                        val.text = '取消'\r\n                                    }\r\n                                    else if(id === 'confirm'){\r\n                                        val.text = '确定'\r\n                                    }\r\n                                }\r\n                                delete defaults[id]\r\n                            }\r\n                            that._button[id === 'close' ? 'unshift' : 'push'](val)\r\n                        }\r\n                    })\r\n                }\r\n                Nui.each(defaults, function(val){\r\n                    that._button.push(val)\r\n                });\r\n            }\r\n            if(!caches.close && opts.close && opts.close.enable === true){\r\n                that._button.unshift({\r\n                    id:'close',\r\n                    name:opts.close.name,\r\n                    style:opts.close.style,\r\n                    text:opts.close.text,\r\n                    callback:opts.close.callback\r\n                })\r\n            }\r\n            if(that._button[0] && that._button[0].id === 'close'){\r\n                buttons.close = that._button[0],\r\n                buttons.button = that._button.slice(1);\r\n            }\r\n            else{\r\n                buttons.button = that._button\r\n            }\r\n            return buttons\r\n        },\r\n        _buttonEvent:function(){\r\n            var that = this;\r\n            Nui.each(that._button, function(val){\r\n                that._on('click', that.element, '.layer-button-'+val.id, function(e, elem){\r\n                    if(!elem.hasClass('nui-button-disabled')){\r\n                        var id = val.id, callback = val.callback;\r\n                        var isCall = typeof callback === 'function' ? callback.call(that, that.main, that.__id, elem) : null;\r\n                        if((id === 'confirm' && isCall === true) || (id !== 'confirm' && isCall !== false)){\r\n                            that.destroy()\r\n                        }\r\n                    }\r\n                })\r\n            })\r\n        },\r\n        _bindTop:function(){\r\n            var that = this;\r\n            that._on('click', that.element, function(){\r\n                that._setzIndex();\r\n            });\r\n        },\r\n        _bindMove:function(){\r\n            var that = this, opts = that.options, element = that.element;\r\n            var self = that.constructor, elem = element, isMove = false, x, y, _x, _y;\r\n            that._on('mousedown', that.head, function(e, ele){\r\n                isMove = true;\r\n                that._setzIndex();\r\n                if(opts.isMoveMask === true){\r\n                    elem = that._moveMask = $(that._tpl2html('movemask', {\r\n                        skin:opts.skin,\r\n                        style:{\r\n                            'z-index':that._zIndex+1,\r\n                            'cursor':'move',\r\n                            'position':that._isFixed ? 'fixed' : 'absolute'\r\n                        }\r\n                    })).appendTo(that._container);\r\n                    elem.css({\r\n                        width:that.data.outerWidth - self._getSize(elem, 'lr', 'all'),\r\n                        height:that.data.outerHeight - self._getSize(elem, 'tb', 'all'),\r\n                        top:that.data.top,\r\n                        left:that.data.left\r\n                    });\r\n                }\r\n                ele.css('cursor','move');\r\n                x = e.pageX - that.data.left;\r\n                y = e.pageY - that.data.top;\r\n                e.stopPropagation();\r\n            });\r\n            that._on('mousemove', Nui.doc, function(e){\r\n                var width = that._container.outerWidth(), height = that._container.outerHeight();\r\n                if(isMove){\r\n                    _x = e.pageX - x;\r\n                    _y = e.pageY - y;\r\n                    _x < 0 && (_x = 0);\r\n                    _y < 0 && (_y = 0);\r\n                    if(opts.isInnerMove === true){\r\n                        _x + that.data.outerWidth > width && (_x = width - that.data.outerWidth);\r\n                        _y + that.data.outerHeight > height && (_y = height - that.data.outerHeight);\r\n                    }\r\n                    that.data.top = _y;\r\n                    that.data.left = _x;\r\n                    elem.css({top:_y, left:_x});\r\n                    return !isMove;\r\n                }\r\n            });\r\n            that._on('mouseup', Nui.doc, function(e){\r\n                if(isMove){\r\n                    isMove = false;\r\n                    that.head.css('cursor','default');\r\n                    if(opts.isMoveMask === true){\r\n                        element.css(that.data);\r\n                        that._moveMask.remove();\r\n                        that._moveMask = null;\r\n                    }\r\n                    if(typeof opts.onMove === 'function'){\r\n                        opts.onMove.call(that, that.main, that.__id)\r\n                    }\r\n                    that.data.offsetTop = that.data.top - that._window.scrollTop();\r\n                    that.data.offsetLeft = that.data.left - that._window.scrollLeft();\r\n                }\r\n            });\r\n        },\r\n        _bindScroll:function(){\r\n            var that = this, opts = that.options;\r\n            that._on('scroll', that._window, function(){\r\n                var top = that.data.offsetTop + that._window.scrollTop();\r\n                var left = that.data.offsetLeft + that._window.scrollLeft();\r\n                that.data.top = top;\r\n                that.data.left = left;\r\n                that.element.css(that.data);\r\n                if(typeof opts.onScroll === 'function'){\r\n                    opts.onScroll.call(that, that.main, that.__id)\r\n                }\r\n            })\r\n        },\r\n        //鼠标点击弹出层将弹出层层级设置最大\r\n        _setzIndex:function(){\r\n            var that = this, self = that.constructor;\r\n            if(that._isTop && that.element){\r\n                that._isTop = false;\r\n                that._zIndex = ++self._zIndex;\r\n                that.element.css('zIndex', that._zIndex);\r\n                that._setTop();\r\n            }\r\n        },\r\n        _setLower:function(destroy){\r\n            var that = this, self = that.constructor, opts = that.options, unders = [];\r\n            if(opts.under){\r\n                unders = unders.concat(opts.under);\r\n                if(unders.length){\r\n                    Nui.each(unders, function(obj, k){\r\n                        if(obj && obj.element){\r\n                            obj.element.css('z-index', destroy ? obj._zIndex : self._maskzIndex-1)\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        },\r\n        _setTop:function(){\r\n            var that = this, self = that.constructor;\r\n            Nui.each(self.__instances, function(val){\r\n                if(val && val !== that && val.options.isTop === true){\r\n                    val._isTop = true;\r\n                }\r\n            });\r\n        },\r\n        _position:function(){\r\n            var that = this, data = that.data, pos = that.options.position;\r\n            var _pos = {\r\n                top:pos.top,\r\n                left:pos.left,\r\n                right:pos.right,\r\n                bottom:pos.bottom\r\n            }, _v;\r\n\r\n            if(_pos.top !== undefined && _pos.bottom !== undefined){\r\n                delete _pos.bottom\r\n            }\r\n\r\n            if(_pos.left !== undefined && _pos.right !== undefined){\r\n                delete _pos.right\r\n            }\r\n\r\n            Nui.each(_pos, function(v, k){\r\n                if(v === undefined){\r\n                    delete _pos[k];\r\n                    return true;\r\n                }\r\n                _v = v;\r\n                if(typeof v === 'string'){\r\n                    if(!v){\r\n                        _v = 0\r\n                    }\r\n                    else{\r\n                        if(k === 'top' || k === 'bottom'){\r\n                            if(v === 'self'){\r\n                                _v = data.outerHeight\r\n                            }\r\n                            else if(/[\\+\\-\\*\\/]/.test(v)){\r\n                                _v = (new Function('var self = '+data.outerHeight+'; return '+v))()\r\n                            }\r\n                        }\r\n                        else{\r\n                            if(v === 'self'){\r\n                                _v = data.outerWidth\r\n                            }\r\n                            else if(/[\\+\\-\\*\\/]/.test(v)){\r\n                                _v = (new Function('var self = '+data.outerWidth+'; return '+v))()\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                _pos[k] = _v === 'auto' ? 'auto' : parseFloat(_v)+'px'\r\n            })\r\n\r\n            return _pos\r\n        },\r\n        _resize:function(type){\r\n            var that = this, self = that.constructor, opts = that.options, element = that.element;\r\n            var wWidth = that._window.outerWidth();\r\n            var wHeight = that._window.outerHeight();\r\n            var stop = 0;\r\n            var sleft = 0;\r\n            if(!that._isFixed){\r\n                sleft = that._window.scrollLeft();\r\n                stop = that._window.scrollTop();\r\n            }\r\n            that._setSize();\r\n            if(opts.position){\r\n                var pos = element.css(that._position()).position();\r\n                if(Nui.bsie6){\r\n                    sleft = 0;\r\n                    stop = 0;\r\n                }\r\n                that.data.left = pos.left + sleft;\r\n                that.data.top = pos.top + stop;\r\n            }\r\n            else{\r\n                if(type === 'init' || opts.isCenter === true){\r\n                    var left = (wWidth - that.data.outerWidth) / 2 + sleft;\r\n                    var top = (wHeight - that.data.outerHeight) / 2 + stop;\r\n                    var edge = opts.edge > 0 ? opts.edge : 0;\r\n                    that.data.left = left > 0 ? left : edge;\r\n                    that.data.top = top > 0 ? top : edge;\r\n                }\r\n            }\r\n            that.data.offsetTop = that.data.top - that._window.scrollTop();\r\n            that.data.offsetLeft = that.data.left - that._window.scrollLeft();\r\n            element.css(that.data);\r\n        },\r\n        _setSize:function(){\r\n            var that = this, self = that.constructor, opts = that.options, element = that.element;\r\n            var edge = opts.edge > 0 ? opts.edge*2 : 0;\r\n            var wWidth = that._window.outerWidth() - edge;\r\n            var wHeight = that._window.outerHeight() - edge;\r\n\r\n            that.body.css({height:'auto', overflow:'visible'});\r\n            element.css({top:'auto', left:'auto', width:'auto', height:'auto'});\r\n            \r\n            var edgeSize = self._getSize(that.box, 'tb', 'all') +\r\n                that.head.outerHeight() + \r\n                self._getSize(that.head, 'tb', 'margin') + \r\n                self._getSize(that.body, 'tb', 'all') + \r\n                that.foot.outerHeight() + \r\n                self._getSize(that.foot, 'tb', 'margin');\r\n\r\n            var width = element.outerWidth();\r\n            if(opts.isFull !== true){\r\n                if(opts.width > 0){\r\n                    width = opts.width\r\n                }\r\n                else if(opts.width === '100%' || (opts.scrollbar === true && width > wWidth)){\r\n                    width = wWidth;\r\n                }\r\n                if(opts.maxWidth > 0 && width >= opts.maxWidth){\r\n                    width = opts.maxWidth\r\n                }\r\n            }\r\n            else{\r\n                width = wWidth;\r\n            }\r\n\r\n            var ws = 'nowrap';\r\n            if(opts.width > 0 || width == opts.maxWidth || width == wWidth){\r\n                ws = 'normal';\r\n            }\r\n\r\n            that.data.width = width - self._getSize(element, 'lr', 'all');\r\n            that.main.css('white-space', ws);\r\n            element.width(that.data.width);\r\n\r\n            var height = element.outerHeight();\r\n            if(that._iframeDocument){\r\n                that._iframeDocument[0].layer = that;\r\n                height = edgeSize + that._iframeDocument.find('body').outerHeight();\r\n            }\r\n\r\n            if(opts.isFull !== true){\r\n                if(opts.height > 0){\r\n                    height = opts.height\r\n                }\r\n                else if(opts.height === '100%' || ((opts.scrollbar === true || that._iframeDocument) && height > wHeight)){\r\n                    height = wHeight\r\n                }\r\n                if(opts.maxHeight > 0 && height >= opts.maxHeight){\r\n                    height = opts.maxHeight\r\n                }\r\n            }\r\n            else{\r\n                height = wHeight\r\n            }\r\n\r\n            that.data.outerWidth = width;\r\n            that.data.outerHeight = height;\r\n            that.data.height = height - self._getSize(element, 'tb', 'all');\r\n            element.height(that.data.height);\r\n            var _height = that.data.height - edgeSize;\r\n            if(that.main.outerHeight() > _height && !that._iframe && opts.scrollbar === true){\r\n                that.body.css('overflow', 'auto')\r\n            }\r\n            if(that._iframe){\r\n                that._iframe.height(_height);\r\n            }\r\n            that.body.height(_height)\r\n        },\r\n        _showMask:function(){\r\n            var that = this, self = that.constructor, opts = that.options;\r\n            if(!that._containerDOM.__layermask__){\r\n                that._containerDOM.__layermask__ = $(that._tpl2html('mask', {\r\n                    skin:opts.skin,\r\n                    style:{\r\n                        'z-index':self._maskzIndex,\r\n                        'position':that._isFixed ? 'fixed' : 'absolute',\r\n                        'top':'0px',\r\n                        'left':'0px',\r\n                        'width':'100%',\r\n                        'height':that._isFixed ? '100%' : that._container.outerHeight()+'px'\r\n                    }\r\n                })).appendTo(that._container);\r\n            }\r\n            if(opts.isClickMask === true){\r\n                that._on('click', that._containerDOM.__layermask__, function(){\r\n                    that.hide()\r\n                })\r\n            }\r\n        },\r\n        _show:function(){\r\n            var that = this, opts = that.options;\r\n            component('init', that.main);\r\n            that._resize('init');\r\n            that._setLower();\r\n            if(opts.isMask === true){\r\n                that._showMask()\r\n            }\r\n            if(opts.timer > 0){\r\n                that.timer = opts.timer;\r\n                that._timer();\r\n            }\r\n            if(typeof opts.onInit === 'function'){\r\n                opts.onInit.call(that, that.main, that.__id)\r\n            }\r\n            return that\r\n        },\r\n        _timer:function(){\r\n            var that = this, opts = that.options;\r\n            if(that.timer > 0){\r\n                if(typeof opts.onTimer === 'function'){\r\n                    opts.onTimer.call(that, that.main, that.timer, that.__id)\r\n                }\r\n                that._timerid = setTimeout(function(){\r\n                    that.timer -= 1000;\r\n                    that._timer();\r\n                }, that.timer > 1000 ? 1000 : that.timer)\r\n            }\r\n            else{\r\n                that.hide()\r\n            }\r\n        },\r\n        _reset:function(){\r\n            var that = this, self = that.constructor, noMask = true;\r\n            component.exports._reset.call(this);\r\n            component('destroy', that.main);\r\n            Nui.each(self.__instances, function(val){\r\n                if(val && val.options.isMask === true && val !== that && val._containerDOM === that._containerDOM){\r\n                    return (noMask = false);\r\n                }   \r\n            });\r\n            if(noMask && that._containerDOM.__layermask__){\r\n                that._containerDOM.__layermask__.remove();\r\n                that._containerDOM.__layermask__  = null;\r\n            }\r\n            if(that.options.timer > 0){\r\n                that.timer = 0;\r\n                clearTimeout(that._timerid);\r\n            }\r\n        },\r\n        resize:function(){\r\n            var that = this, opts = that.options, element = that.element;\r\n            that._resize();\r\n            if(typeof opts.onResize === 'function'){\r\n                opts.onResize.call(this, that.main, that.__id)\r\n            }\r\n            return that\r\n        },\r\n        hide:function(){\r\n            if(this.options.isHide === true){\r\n                this.destroy()\r\n            }\r\n        },\r\n        destroy:function(){\r\n            var that = this, self = that.constructor, opts = that.options;\r\n            if(typeof opts.onBeforeDestroy === 'function' && \r\n                opts.onBeforeDestroy.call(this, that.main, that.__id) === false){\r\n                return\r\n            }\r\n            that._delete();\r\n            that._reset();\r\n            that._setLower(true);\r\n            if(!that._isdestroy){\r\n                self._zIndex--;\r\n                that._isdestroy = true;\r\n            }\r\n            if(typeof opts.onDestroy === 'function'){\r\n                opts.onDestroy.call(this, that.main, that.__id)\r\n            }\r\n        }\r\n    })\r\n});\n/**\r\n * @author Aniu[2016-11-10 22:39]\r\n * @update Aniu[2016-11-10 22:39]\r\n * @version 1.0.1\r\n * @description layer扩展\r\n */\r\n\r\nNui.define('src/components/layer/layerExt',['src/components/layer/layer'], function(layer){\r\n    var module = this;\r\n\r\n    layer.alert = function(content, title, width, height){\r\n        var opts;\r\n        if(typeof content === 'object'){\r\n            opts = content;\r\n            content = opts.content;\r\n            delete opts.content;\r\n        }\r\n        return layer($.extend({\r\n            content:'<div style=\"padding:10px; line-height:20px;\">'+(content||'')+'</div>',\r\n            title:title,\r\n            width:width,\r\n            height:height,\r\n            cancel:{\r\n                text:'关闭'\r\n            }\r\n        }, opts||{}))\r\n    }\r\n\r\n    layer.confirm = function(content, callback, title, width, height){\r\n        var opts;\r\n        if(typeof content === 'object'){\r\n            opts = content;\r\n            content = opts.content;\r\n            delete opts.content;\r\n        }\r\n        return layer($.extend(true, {\r\n            content:'<div style=\"padding:10px; line-height:20px;\">'+(content||'')+'</div>',\r\n            title:title,\r\n            width:width,\r\n            height:height,\r\n            align:'right',\r\n            confirm:{\r\n                callback:callback||function(){\r\n                    return true\r\n                }\r\n            }\r\n        }, opts||{}, {\r\n            confirm:{\r\n                enable:true\r\n            }\r\n        }))\r\n    }\r\n\r\n    layer.iframe = function(src, title, width, height){\r\n        return layer({\r\n            iframe:{\r\n                enable:true,\r\n                src:src\r\n            },\r\n            title:title,\r\n            width:width,\r\n            height:height,\r\n            cancel:{\r\n                text:'关闭'\r\n            }\r\n        })\r\n    }\r\n\r\n    layer.tips = function(content, dir, position, width, height){\r\n        var opts;\r\n        if(typeof content === 'object'){\r\n            opts = content;\r\n            content = opts.content;\r\n            delete opts.content;\r\n        }\r\n        return layer($.extend(true, {\r\n            content:content,\r\n            id:'tips',\r\n            width:width||'auto',\r\n            height:height||'auto',\r\n            position:position,\r\n            bubble:{\r\n                enable:true,\r\n                dir:dir||'top'\r\n            }\r\n        }, opts||{}, {\r\n            isTips:true,\r\n            isMask:false,\r\n            isClose:false,\r\n            close:{\r\n                enable:false\r\n            }\r\n        }))\r\n    }\r\n\r\n    layer.loading = function(content, width, height){\r\n        var opts;\r\n        if(typeof content === 'object'){\r\n            opts = content;\r\n            content = opts.content;\r\n            delete opts.content;\r\n        }\r\n        if(Nui.type(content, 'Number')){\r\n            height = width;\r\n            width = content;\r\n            content = '';\r\n        }\r\n        return layer($.extend({\r\n            content:'<div>'+(content||'正在加载数据...')+'</div>',\r\n            width:width||'auto',\r\n            height:height||'auto',\r\n        }, opts || {}, {\r\n            id:'loading',\r\n            isTips:true,\r\n            close:{\r\n                enable:false\r\n            }\r\n        }))\r\n    }\r\n\r\n    layer.message = function(type, content){\r\n        var opts, color = '#f00';\r\n        if(typeof type === 'object'){\r\n            opts = type;\r\n            content = opts.content;\r\n            delete opts.content;\r\n            type = 'success';\r\n        }\r\n\r\n        if(type !== 'success' && type !== 'error'){\r\n            content = type;\r\n            type = 'success';\r\n        }\r\n\r\n        if(type === 'success' && !content){\r\n            content = '操作成功'\r\n        }\r\n        else if(type === 'error' && !content){\r\n            content = '操作失败'\r\n        }\r\n\r\n        if(type === 'success'){\r\n            color = '#39B54A';\r\n        }\r\n\r\n        return layer($.extend({\r\n            content:'<div style=\"padding:10px; color:'+ color +';\">'+content+'</div>',\r\n            id:'message',\r\n            width:'auto',\r\n            height:'auto',\r\n            isTips:true,\r\n            timer:1500,\r\n            close:{\r\n                enable:true\r\n            }\r\n        }, opts || {}, {\r\n            isMask:false\r\n        }))\r\n    }\r\n\r\n    layer.form = function(options){\r\n        var onInit = options.onInit;\r\n        delete options.onInit;\r\n        var validator;\r\n        var valid = options.valid;\r\n        var btns = $.extend([], options.button || [{\r\n            id:'cancel',\r\n            text:'关闭'\r\n        }, {\r\n            id:'confirm',\r\n            name:'normal',\r\n            text:'保存'\r\n        }])\r\n\r\n        Nui.each(btns, function(val, i){\r\n            if(val.id === 'confirm' && !val.callback){\r\n                btns[i].callback = function(main){\r\n                    main.find('form').submit()\r\n                }\r\n                return false\r\n            }\r\n        })\r\n\r\n        delete options.button;\r\n        var formLayer = layer($.extend(true, {button:btns}, {\r\n            scrollbar:false,\r\n            id:'form',\r\n            onInit:function(main, id){\r\n                var that = this;\r\n                var elems = main.find('[name!=\"\"][data-rule]');\r\n                var form = main.find('form');\r\n                var rules = {};\r\n                var messages = {};\r\n                var setting = form.data('setting');\r\n                elems.each(function(){\r\n                    var elem = $(this);\r\n                    var name = elem.attr('name');\r\n                    var data = elem.data();\r\n                    var rule = eval('('+ data.rule +')');\r\n                    var message = eval('('+ data.message +')');\r\n                    rules[name] = rule;\r\n                    $.each(message, function(key, msg){\r\n                        if(typeof options.messageFilter === 'function'){\r\n                            message[key] = options.messageFilter(name, msg)||''\r\n                        }\r\n                        message[key] = '<b></b><s></s><i class=\"iconfont\">&#xe605;</i>' + message[key];\r\n                    })\r\n                    messages[name] = message;\r\n                });\r\n                var opts = {\r\n                    rules:rules,\r\n                    messages:messages,\r\n                    errorClass:'s-err',\r\n\t\t\t\t\tonkeyup:false,\r\n\t\t\t\t\tfocusInvalid:false,\r\n                    onfocusout:false,\r\n\t\t\t\t\tfocusCleanup:true,\r\n                    ignore:'',\r\n                    success:function(error, element) {\r\n\t\t\t\t\t\terror.remove();\r\n\t\t\t\t\t\t$(element).addClass('s-succ');\r\n\t\t\t\t\t},\r\n\t\t\t\t\terrorPlacement:function(error, element) {\r\n\t\t\t\t\t\telement.removeClass('s-succ');\r\n\t\t\t\t\t\tif(error.text()){\r\n\t\t\t\t\t\t\telement.closest(options.itemWrap||'.ui-item').find(options.errorWrap||'.ui-err').html(error);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n                    submitHandler:function(){\r\n                        var param = {};\r\n                        if(options.ajax && typeof options.ajax.getData === 'function'){\r\n                        \tparam = options.ajax.getData(form)\r\n                        }\r\n                        else{\r\n                        \tvar serialize = form.serializeArray();\r\n                        \t$.each(serialize, function(k, v){\r\n                                if(!param[v.name]){\r\n                                    param[v.name] = [];\r\n                                }\r\n                                param[v.name].push(v.value)\r\n                            })\r\n                            for(var i in param){\r\n                                param[i] = param[i].join(',')\r\n                            }\r\n                        }\r\n\r\n                        if(typeof options.onBeforeSubmit === 'function'){\r\n                        \tparam = options.onBeforeSubmit.call(that, main, id, param);\r\n                            if(param === false){\r\n                                return false\r\n                            }\r\n                        }\r\n\r\n                        var loading = layer.loading({\r\n                            content:options.loading||'正在保存数据...',\r\n                            under:that\r\n                        });\r\n                        \r\n                        $.ajax($.extend({\r\n                            url:form.attr('action'),\r\n                            dataType:'json',\r\n                            type:form.attr('method')||'POST',\r\n                            data:param,\r\n                            success:function(res, xhr){\r\n                                loading.hide();\r\n                                if(typeof options.onSuccess === 'function'){\r\n                                    options.onSuccess.call(that, main, id, res, xhr)\r\n                                }\r\n                            },\r\n                            error:function(xhr){\r\n                                loading.hide();\r\n                                if(typeof options.onError === 'function'){\r\n                                    options.onError.call(that, main, id, xhr)\r\n                                }\r\n                            }\r\n                        }, options.ajax||{}), null)\r\n                    }\r\n                }\r\n                validator = form.validate($.extend(true, opts, setting||{}, valid||{}))\r\n                typeof onInit === 'function' && onInit.call(that, main, id, validator)\r\n            }\r\n        }, options||{}))\r\n        formLayer.validator = validator;\r\n        return formLayer\r\n    }\r\n\r\n    return layer\r\n})\r\n\nNui.define('./script/page',['src/components/layer/layerExt', 'events'], function(layer, events){\r\n    var renders = this.renders;\r\n    events({\r\n        element:document,\r\n        mapping:{\r\n            'click .j-demo':function(){\r\n                layer({\r\n                    content:'<p style=\"padding:10px; text-align:center;\">hello world</p>',\r\n                    width:280,\r\n                    height:140,\r\n                    skin:'aaa',\r\n                    id:'aa',\r\n                    cancel:{\r\n                        text:'关闭'\r\n                    }\r\n                })\r\n            },\r\n            'click .j-position':function(){\r\n                layer({\r\n                    content:renders(''+''\r\n                        +'<div style=\"padding:15px 20px; line-height:20px;\">'+''\r\n                            +'<p>消息标题1</p>'+''\r\n                            +'<p>消息标题2</p>'+''\r\n                            +'<p>消息标题3</p>'+''\r\n                        +'</div>'+''\r\n                    +''),\r\n                    title:'系统消息',\r\n                    width:280,\r\n                    isMask:false,\r\n                    cancel:{\r\n                        enable:false\r\n                    },\r\n                    position:{\r\n                        bottom:'self*-1',\r\n                        right:0\r\n                    },\r\n                    onInit:function(){\r\n                        this.options.position.bottom = 0;\r\n                        this.element.animate({top:this.data.top - this.data.outerHeight})\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    })\r\n})\n"]}